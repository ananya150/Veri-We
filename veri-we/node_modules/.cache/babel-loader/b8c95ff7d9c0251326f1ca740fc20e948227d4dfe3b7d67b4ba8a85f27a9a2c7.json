{"ast":null,"code":"import { applyMiddleware, compose, legacy_createStore } from 'redux';\nimport * as React from 'react';\nimport React__default, { useMemo, useContext, useRef, useEffect, createContext } from 'react';\nimport { createSelector } from 'reselect';\nfunction isLogicWrapper(logic) {\n  return '_isKea' in logic;\n}\nfunction isBuiltLogic(logic) {\n  return '_isKeaBuild' in logic;\n}\nvar shallowCompare = function shallowCompare(obj1, obj2) {\n  var keys1 = Object.keys(obj1);\n  var keys2 = Object.keys(obj2);\n  return keys1.length === keys2.length && keys1.every(function (key) {\n    return obj2.hasOwnProperty(key) && obj1[key] === obj2[key];\n  });\n};\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nvar reservedKeys = {\n  key: true,\n  path: true,\n  pathString: true,\n  props: true,\n  inputs: true,\n  wrapper: true,\n  wrap: true,\n  build: true,\n  mount: true,\n  unmount: true,\n  isMounted: true,\n  findMounted: true,\n  extend: true\n};\nfunction activatePlugin(pluginToActivate) {\n  var plugin = typeof pluginToActivate === 'function' ? pluginToActivate() : pluginToActivate;\n  var _getContext = getContext(),\n    plugins = _getContext.plugins;\n  if (!plugin.name) {\n    throw new Error('[KEA] Tried to activate a plugin without a name!');\n  }\n  if (plugins.activated.find(function (p) {\n    return p.name === plugin.name;\n  })) {\n    throw new Error(\"[KEA] Tried to activate plugin \\\"\" + plugin.name + \"\\\", but it was already installed!\");\n  }\n  plugins.activated.push(plugin);\n  if (plugin.defaults) {\n    var fields = Object.keys(typeof plugin.defaults === 'function' ? plugin.defaults() : plugin.defaults);\n    for (var _i = 0, _fields = fields; _i < _fields.length; _i++) {\n      var key = _fields[_i];\n      if (process.env.NODE_ENV !== 'production') {\n        if (plugins.logicFields[key] || reservedKeys[key]) {\n          console.error(\"[KEA] Plugin \\\"\" + plugin.name + \"\\\" redefines logic field \\\"\" + key + \"\\\". Previously defined by \" + (plugins.logicFields[key] || 'core'));\n        }\n      }\n      plugins.logicFields[key] = plugin.name;\n    }\n  }\n  if (plugin.events) {\n    for (var _i2 = 0, _Object$keys = Object.keys(plugin.events); _i2 < _Object$keys.length; _i2++) {\n      var _key = _Object$keys[_i2];\n      if (!plugins.events[_key]) {\n        plugins.events[_key] = [];\n      }\n      plugins.events[_key].push(plugin.events[_key]);\n    }\n    plugin.events.afterPlugin && plugin.events.afterPlugin();\n  }\n}\nfunction runPlugins(key) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  var _getContext2 = getContext(),\n    plugins = _getContext2.plugins,\n    debug = _getContext2.options.debug;\n  if (debug) {\n    var _console;\n    (_console = console).log.apply(_console, [\"[KEA] Event: \" + key].concat(args));\n  }\n  if (plugins && plugins.events[key]) {\n    plugins.events[key].forEach(function (pluginFunction) {\n      pluginFunction.apply(void 0, args);\n    });\n  }\n}\nvar ATTACH_REDUCER$1 = '@KEA/ATTACH_REDUCER';\nvar DETACH_REDUCER$1 = '@KEA/DETACH_REDUCER';\nvar defaultState = {};\nfunction initRootReducerTree(pathStart) {\n  var _getContext = getContext(),\n    _getContext$reducers = _getContext.reducers,\n    tree = _getContext$reducers.tree,\n    whitelist = _getContext$reducers.whitelist;\n  if (!tree[pathStart]) {\n    if (whitelist && !whitelist[pathStart]) {\n      throw new Error(\"[KEA] Can not start reducer's path with \\\"\" + pathStart + \"\\\"! Please add it to the whitelist\");\n    }\n    tree[pathStart] = {};\n    regenerateRootReducer(pathStart);\n  }\n}\nfunction keaReducer(pathStart) {\n  if (pathStart === void 0) {\n    pathStart = 'scenes';\n  }\n  var _getContext2 = getContext(),\n    roots = _getContext2.reducers.roots;\n  initRootReducerTree(pathStart);\n  return function (state, action, fullState) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n    return roots[pathStart] ? roots[pathStart](state, action, fullState) : state;\n  };\n}\nfunction attachReducer(logic) {\n  var path = logic.path,\n    reducer = logic.reducer;\n  var _getContext3 = getContext(),\n    tree = _getContext3.reducers.tree,\n    attachStrategy = _getContext3.options.attachStrategy,\n    store = _getContext3.store;\n  var pathStart = path[0].toString();\n  initRootReducerTree(pathStart);\n  var pointer = tree;\n  for (var i = 0; i < path.length; i++) {\n    var pathPart = path[i].toString();\n    if (i === path.length - 1) {\n      if (pointer[pathPart]) {\n        if (i === 0 && typeof pointer[pathPart] === 'object' && Object.keys(pointer[pathPart]).length === 0) ;else if (typeof pointer[pathPart] !== 'function') {\n          console.error(\"[KEA] Can not add reducer to \\\"\" + path.join('.') + \"\\\". There is something in the way:\", pointer[pathPart]);\n          return;\n        }\n      }\n      pointer[pathPart] = reducer;\n    } else {\n      if (!pointer[pathPart]) {\n        pointer[pathPart] = {};\n      }\n      pointer = pointer[pathPart];\n    }\n  }\n  regenerateRootReducer(pathStart);\n  if (attachStrategy === 'dispatch' || attachStrategy === 'replace') {\n    runPlugins('beforeAttach', logic);\n    if (attachStrategy === 'dispatch') {\n      store && store.dispatch({\n        type: ATTACH_REDUCER$1,\n        payload: {\n          path: path,\n          reducer: reducer\n        }\n      });\n    } else if (attachStrategy === 'replace') {\n      store && store.replaceReducer(createReduxStoreReducer());\n    }\n    runPlugins('afterAttach', logic);\n  }\n}\nfunction detachReducer(logic) {\n  var path = logic.path;\n  var _getContext4 = getContext(),\n    tree = _getContext4.reducers.tree,\n    detachStrategy = _getContext4.options.detachStrategy,\n    store = _getContext4.store;\n  var pathStart = path[0].toString();\n  if (detachStrategy === 'persist') {\n    return;\n  }\n  var detached = false;\n  for (var i = path.length - 2; i >= 0; i--) {\n    var pointerToHere = tree;\n    for (var j = 0; j <= i; j++) {\n      pointerToHere = pointerToHere && pointerToHere[path[j].toString()] || undefined;\n    }\n    if (pointerToHere) {\n      if (Object.keys(pointerToHere).length === 0) ;else if (Object.keys(pointerToHere).length >= 1 && i === path.length - 2 && typeof pointerToHere[path[i + 1].toString()] === 'function') {\n        delete pointerToHere[path[i + 1].toString()];\n        detached = true;\n      } else if (detached && Object.keys(pointerToHere).length >= 1 && i < path.length - 2 && Object.keys(pointerToHere[path[i + 1].toString()]).length === 0) {\n        delete pointerToHere[path[i + 1].toString()];\n      } else {\n        break;\n      }\n    }\n  }\n  regenerateRootReducer(pathStart);\n  if (detached) {\n    if (detachStrategy === 'dispatch' || detachStrategy === 'replace') {\n      runPlugins('beforeDetach', logic);\n      if (detachStrategy === 'dispatch') {\n        store && store.dispatch({\n          type: DETACH_REDUCER$1,\n          payload: {\n            path: path\n          }\n        });\n      } else if (detachStrategy === 'replace') {\n        store && store.replaceReducer(createReduxStoreReducer());\n      }\n      runPlugins('afterDetach', logic);\n    }\n  }\n}\nfunction regenerateRootReducer(pathStart) {\n  var _getContext5 = getContext(),\n    _getContext5$reducers = _getContext5.reducers,\n    tree = _getContext5$reducers.tree,\n    roots = _getContext5$reducers.roots,\n    whitelist = _getContext5$reducers.whitelist;\n  if (pathStart !== 'kea' && !whitelist && typeof tree[pathStart] === 'object' && Object.keys(tree[pathStart]).length === 0) {\n    delete roots[pathStart];\n  } else {\n    roots[pathStart] = recursiveCreateReducer(tree[pathStart]);\n  }\n  regenerateCombinedReducer();\n}\nfunction recursiveCreateReducer(treeNode) {\n  if (typeof treeNode === 'function') {\n    return treeNode;\n  }\n  var children = {};\n  Object.keys(treeNode).forEach(function (key) {\n    if (typeof treeNode[key] !== 'undefined') {\n      children[key] = recursiveCreateReducer(treeNode[key]);\n    }\n  });\n  if (Object.keys(children).length > 0) {\n    return combineKeaReducers(children);\n  } else {\n    var emptyObj = {};\n    return function () {\n      return emptyObj;\n    };\n  }\n}\nfunction combineKeaReducers(reducers) {\n  return function combination(state, action, fullState) {\n    if (state === void 0) {\n      state = {};\n    }\n    var reducerKeys = Object.keys(reducers);\n    var stateChanged = Object.keys(state).length !== reducerKeys.length;\n    var nextState = {};\n    for (var _i = 0, _reducerKeys = reducerKeys; _i < _reducerKeys.length; _i++) {\n      var key = _reducerKeys[_i];\n      var reducer = reducers[key];\n      var previousKeyState = state[key];\n      var nextKeyState = reducer(previousKeyState, action, fullState || state);\n      if (typeof nextKeyState === 'undefined') {\n        throw new Error(\"[KEA] Reducer \\\"\" + key + \"\\\" returned undefined for action \\\"\" + (action && action.type) + \"\\\"\");\n      }\n      nextState[key] = nextKeyState;\n      stateChanged = stateChanged || nextKeyState !== previousKeyState;\n    }\n    return stateChanged ? nextState : state;\n  };\n}\nfunction regenerateCombinedReducer() {\n  var _getContext$reducers2 = getContext().reducers,\n    redux = _getContext$reducers2.redux,\n    roots = _getContext$reducers2.roots;\n  var reducers = _extends({}, redux, roots);\n  getContext().reducers.combined = combineKeaReducers(reducers);\n}\nfunction createReduxStoreReducer() {\n  regenerateCombinedReducer();\n  return function (state, action) {\n    var _getContext$reducers$, _getContext$reducers3;\n    if (state === void 0) {\n      state = defaultState;\n    }\n    return (_getContext$reducers$ = (_getContext$reducers3 = getContext().reducers).combined) === null || _getContext$reducers$ === void 0 ? void 0 : _getContext$reducers$.call(_getContext$reducers3, state, action, state);\n  };\n}\nvar shim = {\n  exports: {}\n};\nvar useSyncExternalStoreShim_production_min = {};\nvar e = React__default;\nfunction h(a, b) {\n  return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;\n}\nvar k = \"function\" === typeof Object.is ? Object.is : h,\n  l = e.useState,\n  m = e.useEffect,\n  n = e.useLayoutEffect,\n  p = e.useDebugValue;\nfunction q(a, b) {\n  var d = b(),\n    f = l({\n      inst: {\n        value: d,\n        getSnapshot: b\n      }\n    }),\n    c = f[0].inst,\n    g = f[1];\n  n(function () {\n    c.value = d;\n    c.getSnapshot = b;\n    r(c) && g({\n      inst: c\n    });\n  }, [a, d, b]);\n  m(function () {\n    r(c) && g({\n      inst: c\n    });\n    return a(function () {\n      r(c) && g({\n        inst: c\n      });\n    });\n  }, [a]);\n  p(d);\n  return d;\n}\nfunction r(a) {\n  var b = a.getSnapshot;\n  a = a.value;\n  try {\n    var d = b();\n    return !k(a, d);\n  } catch (f) {\n    return !0;\n  }\n}\nfunction t(a, b) {\n  return b();\n}\nvar u = \"undefined\" === typeof window || \"undefined\" === typeof window.document || \"undefined\" === typeof window.document.createElement ? t : q;\nuseSyncExternalStoreShim_production_min.useSyncExternalStore = void 0 !== e.useSyncExternalStore ? e.useSyncExternalStore : u;\nvar useSyncExternalStoreShim_development = {};\nif (process.env.NODE_ENV !== \"production\") {\n  (function () {\n    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart === 'function') {\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\n    }\n    var React = React__default;\n    var ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n    function error(format) {\n      {\n        {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n          printWarning('error', format, args);\n        }\n      }\n    }\n    function printWarning(level, format, args) {\n      {\n        var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n        var stack = ReactDebugCurrentFrame.getStackAddendum();\n        if (stack !== '') {\n          format += '%s';\n          args = args.concat([stack]);\n        }\n        var argsWithFormat = args.map(function (item) {\n          return String(item);\n        });\n        argsWithFormat.unshift('Warning: ' + format);\n        Function.prototype.apply.call(console[level], console, argsWithFormat);\n      }\n    }\n    function is(x, y) {\n      return x === y && (x !== 0 || 1 / x === 1 / y) || x !== x && y !== y;\n    }\n    var objectIs = typeof Object.is === 'function' ? Object.is : is;\n    var useState = React.useState,\n      useEffect = React.useEffect,\n      useLayoutEffect = React.useLayoutEffect,\n      useDebugValue = React.useDebugValue;\n    var didWarnOld18Alpha = false;\n    var didWarnUncachedGetSnapshot = false;\n    function useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n      {\n        if (!didWarnOld18Alpha) {\n          if (React.startTransition !== undefined) {\n            didWarnOld18Alpha = true;\n            error('You are using an outdated, pre-release alpha of React 18 that ' + 'does not support useSyncExternalStore. The ' + 'use-sync-external-store shim will not work correctly. Upgrade ' + 'to a newer pre-release.');\n          }\n        }\n      }\n      var value = getSnapshot();\n      {\n        if (!didWarnUncachedGetSnapshot) {\n          var cachedValue = getSnapshot();\n          if (!objectIs(value, cachedValue)) {\n            error('The result of getSnapshot should be cached to avoid an infinite loop');\n            didWarnUncachedGetSnapshot = true;\n          }\n        }\n      }\n      var _useState = useState({\n          inst: {\n            value: value,\n            getSnapshot: getSnapshot\n          }\n        }),\n        inst = _useState[0].inst,\n        forceUpdate = _useState[1];\n      useLayoutEffect(function () {\n        inst.value = value;\n        inst.getSnapshot = getSnapshot;\n        if (checkIfSnapshotChanged(inst)) {\n          forceUpdate({\n            inst: inst\n          });\n        }\n      }, [subscribe, value, getSnapshot]);\n      useEffect(function () {\n        if (checkIfSnapshotChanged(inst)) {\n          forceUpdate({\n            inst: inst\n          });\n        }\n        var handleStoreChange = function () {\n          if (checkIfSnapshotChanged(inst)) {\n            forceUpdate({\n              inst: inst\n            });\n          }\n        };\n        return subscribe(handleStoreChange);\n      }, [subscribe]);\n      useDebugValue(value);\n      return value;\n    }\n    function checkIfSnapshotChanged(inst) {\n      var latestGetSnapshot = inst.getSnapshot;\n      var prevValue = inst.value;\n      try {\n        var nextValue = latestGetSnapshot();\n        return !objectIs(prevValue, nextValue);\n      } catch (error) {\n        return true;\n      }\n    }\n    function useSyncExternalStore$1(subscribe, getSnapshot, getServerSnapshot) {\n      return getSnapshot();\n    }\n    var canUseDOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\n    var isServerEnvironment = !canUseDOM;\n    var shim = isServerEnvironment ? useSyncExternalStore$1 : useSyncExternalStore;\n    var useSyncExternalStore$2 = React.useSyncExternalStore !== undefined ? React.useSyncExternalStore : shim;\n    useSyncExternalStoreShim_development.useSyncExternalStore = useSyncExternalStore$2;\n    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop === 'function') {\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\n    }\n  })();\n}\nif (process.env.NODE_ENV === 'production') {\n  shim.exports = useSyncExternalStoreShim_production_min;\n} else {\n  shim.exports = useSyncExternalStoreShim_development;\n}\nvar pauseCounter = 0;\nvar isPaused = function isPaused() {\n  return pauseCounter !== 0;\n};\nvar getStoreState$1 = function getStoreState() {\n  return getContext().store.getState();\n};\nfunction useSelector(selector) {\n  return shim.exports.useSyncExternalStore(getContext().store.subscribe, function () {\n    return selector(getStoreState$1());\n  });\n}\nfunction useValues(logic) {\n  var builtLogic = useMountedLogic(logic);\n  return useMemo(function () {\n    var response = {};\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return useSelector(builtLogic.selectors[key]);\n        }\n      });\n    };\n    for (var _i = 0, _Object$keys = Object.keys(builtLogic.selectors); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n    return response;\n  }, [builtLogic.pathString]);\n}\nfunction useAllValues(logic) {\n  var builtLogic = useMountedLogic(logic);\n  var response = {};\n  for (var _i2 = 0, _Object$keys2 = Object.keys(builtLogic.selectors); _i2 < _Object$keys2.length; _i2++) {\n    var key = _Object$keys2[_i2];\n    response[key] = useSelector(builtLogic.selectors[key]);\n  }\n  return response;\n}\nfunction useActions(logic) {\n  var builtLogic = useMountedLogic(logic);\n  return builtLogic['actions'];\n}\nvar blankContext = /*#__PURE__*/createContext(undefined);\nfunction useMountedLogic(logic) {\n  var builtLogicContext = isLogicWrapper(logic) ? getContext().react.contexts.get(logic) : null;\n  var defaultBuiltLogic = useContext(builtLogicContext || blankContext);\n  var builtLogic = isLogicWrapper(logic) ? defaultBuiltLogic || logic.build() : logic;\n  var unmount = useRef(undefined);\n  if (!unmount.current) {\n    batchChanges(function () {\n      unmount.current = builtLogic.mount();\n    });\n  }\n  var pathString = useRef(builtLogic.pathString);\n  if (pathString.current !== builtLogic.pathString) {\n    batchChanges(function () {\n      var _unmount$current;\n      (_unmount$current = unmount.current) === null || _unmount$current === void 0 ? void 0 : _unmount$current.call(unmount);\n      unmount.current = builtLogic.mount();\n      pathString.current = builtLogic.pathString;\n    });\n  }\n  useEffect(function useMountedLogicEffect() {\n    if (!unmount.current) {\n      batchChanges(function () {\n        unmount.current = builtLogic.mount();\n        pathString.current = builtLogic.pathString;\n      });\n    }\n    return function useMountedLogicEffectCleanup() {\n      batchChanges(function () {\n        unmount.current && unmount.current();\n        unmount.current = undefined;\n      });\n    };\n  }, []);\n  return builtLogic;\n}\nvar timeout;\nfunction batchChanges(callback) {\n  var previousState = getStoreState$1();\n  pauseCounter += 1;\n  try {\n    callback();\n  } catch (e) {} finally {\n    pauseCounter -= 1;\n  }\n  var newState = getStoreState$1();\n  if (previousState !== newState) {\n    timeout && window.clearTimeout(timeout);\n    timeout = window.setTimeout(function () {\n      return getContext().store.dispatch({\n        type: '@KEA/FLUSH'\n      });\n    }, 0);\n  }\n}\nvar reduxDevToolsCompose = typeof window !== 'undefined' && window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__'] ? window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__'] : compose;\nvar createDefaultOptions = function createDefaultOptions() {\n  return {\n    paths: [],\n    reducers: {},\n    preloadedState: undefined,\n    middleware: [],\n    compose: reduxDevToolsCompose,\n    enhancers: [],\n    plugins: []\n  };\n};\nfunction createStore(opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var context = getContext();\n  if (!context) {\n    console.error('[KEA] Can not create a store without a Kea context.');\n    return;\n  }\n  if (context['__store']) {\n    console.error('[KEA] Already attached to a store! Exiting. Please reset the kea context before creating a store.');\n    return;\n  }\n  var options = _extends({}, createDefaultOptions(), opts);\n  context.reducers.redux = _extends({}, options.reducers);\n  runPlugins('beforeReduxStore', options);\n  if (options.middleware.length > 0) {\n    options.enhancers = [applyMiddleware.apply(void 0, options.middleware)].concat(options.enhancers);\n  }\n  var composeEnchancer = options.compose || compose;\n  var finalCreateStore = composeEnchancer.apply(void 0, [pauseListenersEnhancer].concat(options.enhancers))(legacy_createStore);\n  if (options.paths && options.paths.length > 0) {\n    context.reducers.whitelist = {};\n    options.paths.forEach(function (pathStart) {\n      context.reducers.whitelist[pathStart] = true;\n      initRootReducerTree(pathStart);\n    });\n  } else {\n    initRootReducerTree('kea');\n  }\n  var store = finalCreateStore(createReduxStoreReducer(), _extends({}, options.preloadedState));\n  context['__store'] = store;\n  runPlugins('afterReduxStore', options, store);\n  return store;\n}\nvar pauseListenersEnhancer = function pauseListenersEnhancer(createStore) {\n  return function (reducer, initialState) {\n    var store = createStore(reducer, initialState);\n    var storeSubscribe = store.subscribe;\n    store.subscribe = function (observer) {\n      var pausedObserver = function pausedObserver() {\n        if (!isPaused()) {\n          observer();\n        }\n      };\n      return storeSubscribe(pausedObserver);\n    };\n    return store;\n  };\n};\nvar _excluded = [\"plugins\", \"createStore\", \"defaults\"];\nvar context;\nfunction getContext() {\n  return context;\n}\nvar getStoreState = function getStoreState() {\n  return getContext().store.getState();\n};\nfunction setContext(newContext) {\n  context = newContext;\n}\nvar contextId = 0;\nfunction openContext(options, initial) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (initial === void 0) {\n    initial = false;\n  }\n  if (context) {\n    console.error('[KEA] overwriting already opened context. This may lead to errors.');\n  }\n  var _options = options,\n    plugins = _options.plugins,\n    _options$createStore = _options.createStore,\n    createStoreOptions = _options$createStore === void 0 ? true : _options$createStore,\n    defaults = _options.defaults,\n    otherOptions = _objectWithoutPropertiesLoose(_options, _excluded);\n  var newContext = {\n    contextId: \"kea-context-\" + contextId++,\n    plugins: {\n      activated: [],\n      events: {},\n      logicFields: {},\n      contexts: {}\n    },\n    inputCounter: 0,\n    reducerDefaults: defaults,\n    wrapperContexts: new WeakMap(),\n    buildHeap: [],\n    mount: {\n      counter: {},\n      mounted: {}\n    },\n    react: {\n      contexts: new WeakMap()\n    },\n    reducers: {\n      tree: {},\n      roots: {},\n      redux: {},\n      whitelist: false,\n      combined: undefined\n    },\n    store: undefined,\n    __store: undefined,\n    options: _extends({\n      debug: false,\n      proxyFields: true,\n      flatDefaults: false,\n      attachStrategy: 'dispatch',\n      detachStrategy: 'dispatch',\n      defaultPath: ['kea', 'logic']\n    }, otherOptions)\n  };\n  Object.defineProperty(newContext, 'store', {\n    get: function get() {\n      var store = newContext['__store'];\n      if (!store && createStoreOptions) {\n        return createStore(typeof createStoreOptions === 'object' ? createStoreOptions : {});\n      }\n      return store;\n    },\n    set: function set(store) {\n      newContext['__store'] = store;\n    }\n  });\n  setContext(newContext);\n  activatePlugin(corePlugin);\n  runPlugins('afterOpenContext', newContext, options);\n  if (plugins) {\n    for (var _iterator = _createForOfIteratorHelperLoose(plugins), _step; !(_step = _iterator()).done;) {\n      var plugin = _step.value;\n      activatePlugin(plugin);\n    }\n  }\n  if (!initial && createStoreOptions) {\n    context.store;\n  }\n  return context;\n}\nfunction closeContext() {\n  if (context) {\n    runPlugins('beforeCloseContext', context);\n  }\n  context = undefined;\n}\nfunction resetContext(options, initial) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (initial === void 0) {\n    initial = false;\n  }\n  if (context) {\n    closeContext();\n  }\n  return openContext(options, initial);\n}\nfunction getPluginContext(name) {\n  var _getContext = getContext(),\n    plugins = _getContext.plugins;\n  if (!plugins.contexts[name]) {\n    plugins.contexts[name] = {};\n  }\n  return plugins.contexts[name];\n}\nfunction setPluginContext(name, pluginContext) {\n  var _getContext2 = getContext(),\n    plugins = _getContext2.plugins;\n  plugins.contexts[name] = pluginContext;\n}\nfunction events(input) {\n  return function (logic) {\n    var events = typeof input === 'function' ? input(logic) : input;\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n      var event = events[key];\n      var newEvent = Array.isArray(event) ? function (props, oldProps) {\n        return event.forEach(function (e) {\n          return e(props, oldProps);\n        });\n      } : event;\n      if (logic.events[key]) {\n        var oldEvent = logic.events[key];\n        logic.events[key] = function (props, oldProps) {\n          oldEvent === null || oldEvent === void 0 ? void 0 : oldEvent(props, oldProps);\n          newEvent === null || newEvent === void 0 ? void 0 : newEvent(props, oldProps);\n        };\n      } else if (newEvent) {\n        logic.events[key] = newEvent;\n      }\n    };\n    for (var _i = 0, _Object$keys = Object.keys(events); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n  };\n}\nfunction afterMount(input) {\n  return events(function (logic) {\n    return {\n      afterMount: function afterMount() {\n        return input(logic);\n      }\n    };\n  });\n}\nfunction beforeUnmount(input) {\n  return events(function (logic) {\n    return {\n      beforeUnmount: function beforeUnmount() {\n        return input(logic);\n      }\n    };\n  });\n}\nfunction propsChanged(input) {\n  return events(function (logic) {\n    return {\n      propsChanged: function propsChanged(props, oldProps) {\n        return input(logic, oldProps);\n      }\n    };\n  });\n}\nvar LISTENERS_BREAKPOINT = 'kea-listeners breakpoint broke';\nvar isBreakpoint = function isBreakpoint(error) {\n  return error.message === LISTENERS_BREAKPOINT;\n};\nfunction listeners(input) {\n  return function (logic) {\n    var _logic$cache, _logic$cache$listener;\n    if (!logic.listeners) {\n      logic.listeners = {};\n      afterMount(function () {\n        addListeners(logic);\n      })(logic);\n      beforeUnmount(function () {\n        removeListeners(logic);\n        if (logic.cache.listenerBreakpointCounter) {\n          for (var _i = 0, _Object$keys = Object.keys(logic.cache.listenerBreakpointCounter); _i < _Object$keys.length; _i++) {\n            var key = _Object$keys[_i];\n            logic.cache.listenerBreakpointCounter[key] += 1;\n          }\n        }\n      })(logic);\n    }\n    (_logic$cache$listener = (_logic$cache = logic.cache).listenerBreakpointCounter) !== null && _logic$cache$listener !== void 0 ? _logic$cache$listener : _logic$cache.listenerBreakpointCounter = {};\n    var listeners = typeof input === 'function' ? input(logic) : input;\n    var _getContext = getContext(),\n      contextId = _getContext.contextId;\n    var _loop = function _loop() {\n      var actionKey = _Object$keys2[_i2];\n      var listenerArray = Array.isArray(listeners[actionKey]) ? listeners[actionKey] : [listeners[actionKey]];\n      var key = actionKey;\n      if (typeof logic.actions[key] !== 'undefined') {\n        key = logic.actions[key].toString();\n      }\n      var start = logic.listeners[key] ? logic.listeners[key].length : 0;\n      var listenerWrapperArray = listenerArray.map(function (listener, index) {\n        var listenerKey = contextId + \"/\" + key + \"/\" + (start + index);\n        return function (action, previousState) {\n          var breakCounter = (logic.cache.listenerBreakpointCounter[listenerKey] || 0) + 1;\n          logic.cache.listenerBreakpointCounter[listenerKey] = breakCounter;\n          var throwIfCalled = function throwIfCalled() {\n            if (logic.cache.listenerBreakpointCounter[listenerKey] !== breakCounter || contextId !== getContext().contextId) {\n              throw new Error(LISTENERS_BREAKPOINT);\n            }\n          };\n          var breakpoint = function breakpoint(ms) {\n            if (typeof ms !== 'undefined') {\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, ms);\n              }).then(function () {\n                throwIfCalled();\n              });\n            } else {\n              throwIfCalled();\n            }\n          };\n          var response;\n          try {\n            response = listener(action.payload, breakpoint, action, previousState);\n            if (response && response.then && typeof response.then === 'function') {\n              trackPendingListener(logic, actionKey, response);\n              return response[\"catch\"](function (e) {\n                if (e.message !== LISTENERS_BREAKPOINT) {\n                  throw e;\n                }\n              });\n            }\n          } catch (e) {\n            if (e.message !== LISTENERS_BREAKPOINT) {\n              throw e;\n            }\n          }\n          return response;\n        };\n      });\n      if (logic.listeners[key]) {\n        logic.listeners[key] = [].concat(logic.listeners[key], listenerWrapperArray);\n      } else {\n        logic.listeners[key] = listenerWrapperArray;\n      }\n    };\n    for (var _i2 = 0, _Object$keys2 = Object.keys(listeners); _i2 < _Object$keys2.length; _i2++) {\n      _loop();\n    }\n  };\n}\nfunction sharedListeners(input) {\n  return function (logic) {\n    logic.sharedListeners = _extends({}, logic.sharedListeners || {}, typeof input === 'function' ? input(logic) : input);\n  };\n}\nfunction addListeners(logic) {\n  var _logic$listeners;\n  var _getPluginContext = getPluginContext('listeners'),\n    byPath = _getPluginContext.byPath,\n    byAction = _getPluginContext.byAction;\n  byPath[logic.pathString] = (_logic$listeners = logic.listeners) !== null && _logic$listeners !== void 0 ? _logic$listeners : {};\n  for (var _i3 = 0, _Object$entries = Object.entries((_logic$listeners2 = logic.listeners) !== null && _logic$listeners2 !== void 0 ? _logic$listeners2 : {}); _i3 < _Object$entries.length; _i3++) {\n    var _logic$listeners2, _logic$actionTypes$ke;\n    var _Object$entries$_i = _Object$entries[_i3],\n      key = _Object$entries$_i[0],\n      listenerArray = _Object$entries$_i[1];\n    var type = (_logic$actionTypes$ke = logic.actionTypes[key]) !== null && _logic$actionTypes$ke !== void 0 ? _logic$actionTypes$ke : key;\n    if (!byAction[type]) {\n      byAction[type] = {};\n    }\n    byAction[type][logic.pathString] = listenerArray;\n  }\n}\nfunction removeListeners(logic) {\n  var _getPluginContext2 = getPluginContext('listeners'),\n    byPath = _getPluginContext2.byPath,\n    byAction = _getPluginContext2.byAction;\n  for (var _i4 = 0, _Object$keys3 = Object.keys((_logic$listeners3 = logic.listeners) !== null && _logic$listeners3 !== void 0 ? _logic$listeners3 : {}); _i4 < _Object$keys3.length; _i4++) {\n    var _logic$listeners3, _logic$actionTypes$ke2;\n    var key = _Object$keys3[_i4];\n    var type = (_logic$actionTypes$ke2 = logic.actionTypes[key]) !== null && _logic$actionTypes$ke2 !== void 0 ? _logic$actionTypes$ke2 : key;\n    if (byAction[type]) {\n      delete byAction[type][logic.pathString];\n      if (Object.keys(byAction[type]).length === 0) {\n        delete byAction[type];\n      }\n    }\n  }\n  delete byPath[logic.pathString];\n}\nfunction trackPendingListener(logic, actionKey, response) {\n  var _getPluginContext3 = getPluginContext('listeners'),\n    pendingPromises = _getPluginContext3.pendingPromises;\n  pendingPromises.set(response, [logic, actionKey]);\n  var remove = function remove() {\n    pendingPromises[\"delete\"](response);\n  };\n  response.then(remove)[\"catch\"](remove);\n}\nfunction actions(input) {\n  return function (logic) {\n    var actions = typeof input === 'function' ? input(logic) : input;\n    var _loop = function _loop() {\n      var _Object$entries$_i = _Object$entries[_i],\n        key = _Object$entries$_i[0],\n        payloadCreator = _Object$entries$_i[1];\n      var actionCreator = typeof payloadCreator === 'function' && '_isKeaAction' in payloadCreator ? payloadCreator : createActionCreator(createActionType(key, logic.pathString), payloadCreator !== null && payloadCreator !== void 0 ? payloadCreator : true);\n      var type = actionCreator.toString();\n      logic.actionCreators[key] = actionCreator;\n      logic.actions[key] = function () {\n        var builtAction = actionCreator.apply(void 0, arguments);\n        getContext().store.dispatch(builtAction);\n      };\n      logic.actions[key].toString = function () {\n        return type;\n      };\n      logic.actionKeys[type] = key;\n      logic.actionTypes[key] = type;\n    };\n    for (var _i = 0, _Object$entries = Object.entries(actions); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n  };\n}\nfunction createActionCreator(type, payloadCreator) {\n  var action = function action() {\n    return {\n      type: type,\n      payload: typeof payloadCreator === 'function' ? payloadCreator.apply(void 0, arguments) : {\n        value: true\n      }\n    };\n  };\n  action.toString = function () {\n    return type;\n  };\n  action._isKeaAction = true;\n  return action;\n}\nfunction createActionType(key, pathString) {\n  var toSpaces = function toSpaces(key) {\n    return key.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) {\n      return ' ' + y.toLowerCase();\n    }).replace(/^ /, '');\n  };\n  return toSpaces(key) + \" (\" + pathString + \")\";\n}\nfunction connect(input) {\n  return function (logic) {\n    var props = logic.props || {};\n    var connect = typeof input === 'function' ? input(props) : input;\n    var connectLogic = Array.isArray(connect) ? connect : '_isKeaBuild' in connect || '_isKea' in connect ? [connect] : connect.logic;\n    if (connectLogic) {\n      for (var _iterator = _createForOfIteratorHelperLoose(connectLogic), _step; !(_step = _iterator()).done;) {\n        var otherLogic = _step.value;\n        if ('_isKea' in otherLogic) {\n          otherLogic = otherLogic(props);\n        }\n        addConnection(logic, otherLogic);\n      }\n    }\n    if ('_isKeaBuild' in connect || '_isKea' in connect || Array.isArray(connect)) {\n      return;\n    }\n    if (connect.actions) {\n      var response = deconstructMapping(connect.actions);\n      var _loop = function _loop() {\n        var _step2$value = _step2.value,\n          otherLogic = _step2$value[0],\n          from = _step2$value[1],\n          to = _step2$value[2];\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof otherLogic !== 'function' && typeof otherLogic !== 'object') {\n            throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can not connect to \" + typeof otherLogic + \" to request action \\\"\" + from + \"\\\"\");\n          }\n        }\n        if (isLogicWrapper(otherLogic)) {\n          otherLogic = otherLogic.build(props);\n        }\n        if (isBuiltLogic(otherLogic)) {\n          addConnection(logic, otherLogic);\n          if (getContext().buildHeap.includes(otherLogic)) {\n            logic.actionCreators[to] = function () {\n              var _otherLogic$actionCre;\n              return (_otherLogic$actionCre = otherLogic.actionCreators)[from].apply(_otherLogic$actionCre, arguments);\n            };\n            logic.actionCreators[to].toString = function () {\n              return createActionType(from, otherLogic.pathString);\n            };\n            logic.actionTypes[to] = logic.actionCreators[to].toString();\n          } else {\n            logic.actionCreators[to] = otherLogic.actionCreators[from];\n            logic.actionTypes[to] = otherLogic.actionTypes[from];\n          }\n        } else {\n          logic.actionCreators[to] = otherLogic[from];\n          if (logic.actionCreators[to]._isKeaAction) {\n            logic.actionTypes[to] = logic.actionCreators[to].toString();\n          } else {\n            logic.actionTypes[to] = logic.actionCreators[to]().type;\n          }\n        }\n        logic.actionKeys[logic.actionTypes[to]] = to;\n        if (typeof logic.actionCreators[to] === 'undefined') {\n          throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\", connecting to action \\\"\" + from + \"\\\" returns 'undefined'\");\n        }\n        logic.actions[to] = function () {\n          var _logic$actionCreators;\n          var builtAction = (_logic$actionCreators = logic.actionCreators)[to].apply(_logic$actionCreators, arguments);\n          getContext().store.dispatch(builtAction);\n        };\n        logic.actions[to].toString = function () {\n          return logic.actionTypes[to];\n        };\n      };\n      for (var _iterator2 = _createForOfIteratorHelperLoose(response), _step2; !(_step2 = _iterator2()).done;) {\n        _loop();\n      }\n    }\n    if (connect.values) {\n      var _response = deconstructMapping(connect.values);\n      var _loop2 = function _loop2() {\n        var _step3$value = _step3.value,\n          otherLogic = _step3$value[0],\n          from = _step3$value[1],\n          to = _step3$value[2];\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof otherLogic !== 'function' && typeof otherLogic !== 'object') {\n            throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can not connect to \" + typeof otherLogic + \" to request prop \\\"\" + from + \"\\\"\");\n          }\n        }\n        if (isLogicWrapper(otherLogic)) {\n          otherLogic = otherLogic(props);\n        }\n        if (isBuiltLogic(otherLogic)) {\n          addConnection(logic, otherLogic);\n          var selector = from === '*' ? otherLogic.selector : otherLogic.selectors[from];\n          var throwError = function throwError() {\n            throw new Error(\"Connected selector \\\"\" + to + \"\\\" on logic \\\"\" + logic.pathString + \"\\\" is undefined.\");\n          };\n          if (selector) {\n            logic.selectors[to] = selector;\n          } else if (getContext().buildHeap.includes(otherLogic)) {\n            logic.selectors[to] = function (state, props) {\n              return otherLogic.selectors[from] ? otherLogic.selectors[from](state, props) : throwError();\n            };\n          } else {\n            throwError();\n          }\n        } else if (typeof otherLogic === 'function') {\n          logic.selectors[to] = from === '*' ? otherLogic : function (state, props) {\n            var values = otherLogic(state, props);\n            return values && values[from];\n          };\n        }\n        if (logic.selectors[to] && !logic.values.hasOwnProperty(to)) {\n          Object.defineProperty(logic.values, to, {\n            get: function get() {\n              return logic.selectors[to](getStoreState(), logic.props);\n            },\n            enumerable: true\n          });\n        }\n      };\n      for (var _iterator3 = _createForOfIteratorHelperLoose(_response), _step3; !(_step3 = _iterator3()).done;) {\n        _loop2();\n      }\n    }\n  };\n}\nfunction deconstructMapping(mapping) {\n  if (mapping.length % 2 === 1) {\n    console.error(mapping);\n    throw new Error(\"[KEA] Uneven mapping given to connect\");\n  }\n  var response = [];\n  for (var i = 0; i < mapping.length; i += 2) {\n    var logic = mapping[i];\n    var array = mapping[i + 1];\n    if (!Array.isArray(array)) {\n      console.error(mapping);\n      throw new Error('[KEA] Invalid mapping given to connect. Make sure every second element is an array!');\n    }\n    for (var j = 0; j < array.length; j++) {\n      if (array[j].includes(' as ')) {\n        var parts = array[j].split(' as ');\n        response.push([logic, parts[0], parts[1]]);\n      } else {\n        response.push([logic, array[j], array[j]]);\n      }\n    }\n  }\n  return response;\n}\nfunction addConnection(logic, otherLogic) {\n  if (!otherLogic.connections || Object.keys(otherLogic.connections).length === 0) {\n    return;\n  }\n  if (logic.connections[otherLogic.pathString]) {\n    return;\n  }\n  Object.keys(otherLogic.connections).forEach(function (path) {\n    if (!logic.connections[path]) {\n      logic.connections[path] = otherLogic.connections[path];\n    }\n  });\n}\nfunction defaults(input) {\n  return function (logic) {\n    var defaults = typeof input === 'function' ? input(logic) : input;\n    if (typeof defaults === 'function') {\n      logic.defaults['*'] = defaults;\n    } else if (typeof defaults === 'object') {\n      var contextDefaults = getContextDefaults(logic);\n      for (var _i = 0, _Object$entries = Object.entries(defaults); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _Object$entries[_i],\n          key = _Object$entries$_i[0],\n          value = _Object$entries$_i[1];\n        logic.defaults[key] = contextDefaults && typeof contextDefaults[key] !== 'undefined' ? contextDefaults[key] : value;\n      }\n    } else {\n      throw new Error(\"[KEA] Unknown defaults of type \\\"\" + typeof defaults + \"\\\" for logic \\\"\" + logic.pathString + \"\\\"\");\n    }\n  };\n}\nfunction getContextDefaults(logic) {\n  var _getContext = getContext(),\n    reducerDefaults = _getContext.reducerDefaults;\n  if (reducerDefaults && !('_keaAutomaticPath' in logic.path)) {\n    if (getContext().options.flatDefaults) {\n      if (reducerDefaults[logic.pathString]) {\n        return reducerDefaults[logic.pathString];\n      }\n    } else {\n      for (var _iterator = _createForOfIteratorHelperLoose(logic.path), _step; !(_step = _iterator()).done;) {\n        var part = _step.value;\n        reducerDefaults = reducerDefaults[part.toString()];\n        if (typeof reducerDefaults !== 'object') {\n          return;\n        }\n      }\n      return reducerDefaults;\n    }\n  }\n}\nfunction selectors(input) {\n  return function (logic) {\n    var selectorInputs = typeof input === 'function' ? input(logic) : input;\n    var builtSelectors = {};\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n      if (typeof logic.selectors[key] !== 'undefined') {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" selector \\\"\" + key + \"\\\" already exists\");\n      }\n      addSelectorAndValue(logic, key, function () {\n        return builtSelectors[key].apply(builtSelectors, arguments);\n      });\n    };\n    for (var _i = 0, _Object$keys = Object.keys(selectorInputs); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n    var _loop2 = function _loop2() {\n      var entry = _Object$entries[_i2];\n      var key = entry[0],\n        _entry$ = entry[1],\n        input = _entry$[0],\n        func = _entry$[1],\n        memoizeOptions = _entry$[2];\n      var args = input(logic.selectors);\n      if (args.filter(function (a) {\n        return typeof a !== 'function';\n      }).length > 0) {\n        var argTypes = args.map(function (a) {\n          return typeof a;\n        }).join(', ');\n        var msg = \"[KEA] Logic \\\"\" + logic.pathString + \"\\\", selector \\\"\" + key + \"\\\" has incorrect input: [\" + argTypes + \"].\";\n        throw new Error(msg);\n      }\n      builtSelectors[key] = createSelector(args, func, {\n        memoizeOptions: memoizeOptions\n      });\n      addSelectorAndValue(logic, key, function (state, props) {\n        if (state === void 0) {\n          state = getStoreState();\n        }\n        if (props === void 0) {\n          props = logic.props;\n        }\n        return builtSelectors[key](state, props);\n      });\n      if (!logic.values.hasOwnProperty(key)) {\n        Object.defineProperty(logic.values, key, {\n          get: function get() {\n            return logic.selectors[key](getStoreState(), logic.props);\n          },\n          enumerable: true\n        });\n      }\n    };\n    for (var _i2 = 0, _Object$entries = Object.entries(selectorInputs); _i2 < _Object$entries.length; _i2++) {\n      _loop2();\n    }\n  };\n}\nfunction addSelectorAndValue(logic, key, selector) {\n  logic.selectors[key] = selector;\n  if (!logic.values.hasOwnProperty(key)) {\n    Object.defineProperty(logic.values, key, {\n      get: function get() {\n        return logic.selectors[key](getStoreState(), logic.props);\n      },\n      enumerable: true\n    });\n  }\n}\nfunction rootReducer() {\n  return function (logic) {\n    logic.reducer = function (state, action, fullState) {\n      return combineKeaReducers(logic.reducers)(state, action, fullState);\n    };\n    if (!logic.selector) {\n      rootSelector()(logic);\n    }\n  };\n}\nfunction rootSelector() {\n  return function (logic) {\n    logic.selector = function (state) {\n      if (state === void 0) {\n        state = getStoreState();\n      }\n      return pathSelector(logic.path, state);\n    };\n  };\n}\nfunction reducers(input) {\n  return function (logic) {\n    var reducers = typeof input === 'function' ? input(logic) : input;\n    if (!logic.reducer) {\n      rootReducer()(logic);\n    }\n    if (!logic.selector) {\n      rootSelector()(logic);\n    }\n    var contextDefaults = getContextDefaults(logic);\n    var _loop = function _loop() {\n      var _logic$cache, _logic$cache$reducers, _logic$cache$reducers2, _logic$cache$reducers3;\n      var _Object$entries$_i = _Object$entries[_i],\n        key = _Object$entries$_i[0],\n        object = _Object$entries$_i[1];\n      var initialValue = void 0;\n      var reducerOptions = void 0;\n      var reducer = void 0;\n      if (Array.isArray(object)) {\n        var _object$, _object$Math$max;\n        initialValue = (_object$ = object[0]) !== null && _object$ !== void 0 ? _object$ : null;\n        reducer = (_object$Math$max = object[Math.max(1, object.length - 1)]) !== null && _object$Math$max !== void 0 ? _object$Math$max : {};\n        if (object.length === 3) {\n          reducerOptions = object[1];\n        }\n      } else if (typeof object === 'object') {\n        initialValue = null;\n        reducer = object;\n      } else {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" reducer \\\"\" + key + \"\\\" is set to unsupported value\");\n      }\n      if (reducerOptions) {\n        var _logic$reducerOptions;\n        logic.reducerOptions[key] = _extends({}, (_logic$reducerOptions = logic.reducerOptions[key]) !== null && _logic$reducerOptions !== void 0 ? _logic$reducerOptions : {}, reducerOptions);\n      }\n      if (typeof logic.defaults[key] === 'undefined') {\n        if (contextDefaults && typeof contextDefaults[key] !== 'undefined') {\n          logic.defaults[key] = contextDefaults[key];\n        } else if (typeof logic.defaults['*'] === 'function') {\n          logic.defaults[key] = function (state, props) {\n            var v = logic.defaults['*'](state, props)[key];\n            return typeof v === 'undefined' ? initialValue : typeof v === 'function' ? v(state, props) : v;\n          };\n        } else {\n          logic.defaults[key] = initialValue;\n        }\n      }\n      (_logic$cache$reducers = (_logic$cache = logic.cache).reducers) !== null && _logic$cache$reducers !== void 0 ? _logic$cache$reducers : _logic$cache.reducers = {};\n      (_logic$cache$reducers3 = (_logic$cache$reducers2 = logic.cache.reducers)[key]) !== null && _logic$cache$reducers3 !== void 0 ? _logic$cache$reducers3 : _logic$cache$reducers2[key] = {};\n      var mapping = logic.cache.reducers[key];\n      for (var _i2 = 0, _Object$keys = Object.keys((_reducer = reducer) !== null && _reducer !== void 0 ? _reducer : {}); _i2 < _Object$keys.length; _i2++) {\n        var _reducer;\n        var _key = _Object$keys[_i2];\n        var mappingKey = logic.actions[_key] ? logic.actions[_key].toString() : _key;\n        mapping[mappingKey] = reducer[_key];\n      }\n      if (typeof mapping['undefined'] !== 'undefined' && typeof logic.actions['undefined'] === 'undefined') {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" reducer \\\"\" + key + \"\\\" is waiting for an action that is undefined: [\" + Object.keys(mapping).join(', ') + \"]\");\n      }\n      if (!logic.reducers[key] && logic.selectors[key]) {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can't add reducer \\\"\" + key + \"\\\" because a selector with the same name exists.\");\n      }\n      if (Object.keys(mapping).length === 0) {\n        logic.reducers[key] = function () {\n          return logic.defaults[key];\n        };\n      } else {\n        logic.reducers[key] = function (state, action, fullState) {\n          if (typeof state === 'undefined') {\n            state = getDefaultState(logic.defaults[key], fullState, key, logic);\n          }\n          if (mapping[action.type]) {\n            return mapping[action.type](state, action.payload, action.meta);\n          } else if (logic.actionKeys[action.type] && mapping[logic.actionKeys[action.type]]) {\n            return mapping[logic.actionKeys[action.type]](state, action.payload, action.meta);\n          } else {\n            return state;\n          }\n        };\n      }\n      if (!logic.selectors[key]) {\n        addSelectorAndValue(logic, key, createSelector(logic.selector, function (state) {\n          return state[key];\n        }));\n      }\n    };\n    for (var _i = 0, _Object$entries = Object.entries(reducers); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n  };\n}\nfunction getDefaultState(defaultValue, fullState, key, logic) {\n  if (typeof defaultValue === 'function') {\n    if (fullState) {\n      return defaultValue(fullState, logic.props);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error(\"[KEA] Store not initialized and can't get default value of \\\"\" + key + \"\\\" in \\\"\" + logic.pathString + \"\\\"\");\n      }\n      return undefined;\n    }\n  }\n  return defaultValue;\n}\nfunction pathSelector(path, state) {\n  return [state].concat(path).reduce(function (v, a) {\n    if (a in v) {\n      return v[a];\n    }\n    throw new Error(\"[KEA] Can not find path \\\"\" + path.join('.') + \"\\\" in the store.\");\n  });\n}\nfunction key(input) {\n  return function (logic) {\n    var key = input(logic.props);\n    if (typeof logic.keyBuilder !== 'undefined') {\n      throw new Error(\"[KEA] Already defined key builder for logic \\\"\" + logic.pathString + \"\\\".\");\n    }\n    if (typeof key === 'undefined') {\n      throw new Error(\"[KEA] Undefined key for logic \\\"\" + logic.pathString + \"\\\"\");\n    }\n    if (Object.keys(logic.actions).length > 0) {\n      throw new Error(\"[KEA] Can not add key to logic \\\"\" + logic.pathString + \"\\\" after adding actions: \" + Object.keys(logic.actions).join(', '));\n    }\n    logic.key = key;\n    logic.keyBuilder = input;\n    var isAutomaticPath = ('_keaAutomaticPath' in logic.path);\n    logic.path = [].concat(logic.path, [logic.key]);\n    logic.pathString = logic.path.join('.');\n    if (isAutomaticPath) {\n      logic.path['_keaAutomaticPath'] = true;\n    }\n  };\n}\nfunction props(input) {\n  return function (logic) {\n    var newProps = _extends({}, input, logic.props);\n    if (!shallowCompare(logic.props, newProps)) {\n      logic.props = newProps;\n    }\n  };\n}\nfunction path(input) {\n  return function (logic) {\n    if (logic.path && !('_keaAutomaticPath' in logic.path)) {\n      return;\n    }\n    if (Object.keys(logic.actions).length > 0) {\n      throw new Error(\"[KEA] Can not add path to logic \\\"\" + logic.pathString + \"\\\" after adding actions: \" + Object.keys(logic.actions).join(', '));\n    }\n    if (typeof input === 'function') {\n      logic.path = input(logic.key).filter(function (l) {\n        return typeof l !== 'undefined';\n      });\n    } else {\n      logic.path = typeof logic.key !== 'undefined' ? [].concat(input, [logic.key]) : input;\n    }\n    logic.pathString = logic.path.join('.');\n  };\n}\nvar corePlugin = {\n  name: 'core',\n  defaults: function defaults() {\n    return {\n      actionCreators: {},\n      actionKeys: {},\n      actionTypes: {},\n      actions: {},\n      cache: {},\n      connections: {},\n      defaults: {},\n      listeners: undefined,\n      reducers: {},\n      reducer: undefined,\n      reducerOptions: {},\n      selector: undefined,\n      selectors: {},\n      sharedListeners: undefined,\n      values: {},\n      events: {}\n    };\n  },\n  events: {\n    afterPlugin: function afterPlugin() {\n      setPluginContext('listeners', {\n        byAction: {},\n        byPath: {},\n        pendingPromises: new Map()\n      });\n    },\n    beforeReduxStore: function beforeReduxStore(options) {\n      options.middleware.push(function (store) {\n        return function (next) {\n          return function (action) {\n            var previousState = store.getState();\n            var response = next(action);\n            var _getPluginContext = getPluginContext('listeners'),\n              byAction = _getPluginContext.byAction;\n            var listeners = byAction[action.type];\n            if (listeners) {\n              for (var _i = 0, _Object$values = Object.values(listeners); _i < _Object$values.length; _i++) {\n                var listenerArray = _Object$values[_i];\n                for (var _iterator = _createForOfIteratorHelperLoose(listenerArray), _step; !(_step = _iterator()).done;) {\n                  var innerListener = _step.value;\n                  innerListener(action, previousState);\n                }\n              }\n            }\n            return response;\n          };\n        };\n      });\n    },\n    legacyBuild: function legacyBuild(logic, input) {\n      'connect' in input && input.connect && connect(input.connect)(logic);\n      runPlugins('legacyBuildAfterConnect', logic, input);\n      'actions' in input && input.actions && actions(input.actions)(logic);\n      'defaults' in input && input.defaults && defaults(input.defaults)(logic);\n      runPlugins('legacyBuildAfterDefaults', logic, input);\n      'reducers' in input && input.reducers && reducers(input.reducers)(logic);\n      'selectors' in input && input.selectors && selectors(input.selectors)(logic);\n      'sharedListeners' in input && sharedListeners(input.sharedListeners)(logic);\n      'listeners' in input && input.listeners && listeners(input.listeners)(logic);\n      'events' in input && input.events && events(input.events)(logic);\n    }\n  }\n};\nfunction mountLogic(logic, count) {\n  if (count === void 0) {\n    count = 1;\n  }\n  var _getContext = getContext(),\n    _getContext$mount = _getContext.mount,\n    counter = _getContext$mount.counter,\n    mounted = _getContext$mount.mounted;\n  var pathStrings = Object.keys(logic.connections).filter(function (k) {\n    return k !== logic.pathString;\n  }).concat([logic.pathString]);\n  for (var _iterator = _createForOfIteratorHelperLoose(pathStrings), _step; !(_step = _iterator()).done;) {\n    var pathString = _step.value;\n    counter[pathString] = (counter[pathString] || 0) + count;\n    if (counter[pathString] === count) {\n      var _connectedLogic$event, _connectedLogic$event2, _connectedLogic$event3, _connectedLogic$event4;\n      var connectedLogic = logic.connections[pathString];\n      if (typeof connectedLogic === 'undefined') {\n        throw new Error(\"[KEA] Can not find connected logic at \\\"\" + pathString + \"\\\". Got \\\"undefined\\\" instead of the logic when trying to mount \\\"\" + logic.pathString + \"\\\".\");\n      }\n      runPlugins('beforeMount', connectedLogic);\n      (_connectedLogic$event = (_connectedLogic$event2 = connectedLogic.events).beforeMount) === null || _connectedLogic$event === void 0 ? void 0 : _connectedLogic$event.call(_connectedLogic$event2);\n      mounted[pathString] = connectedLogic;\n      if (connectedLogic.reducer) {\n        attachReducer(connectedLogic);\n      }\n      runPlugins('afterMount', connectedLogic);\n      (_connectedLogic$event3 = (_connectedLogic$event4 = connectedLogic.events).afterMount) === null || _connectedLogic$event3 === void 0 ? void 0 : _connectedLogic$event3.call(_connectedLogic$event4);\n    }\n  }\n}\nfunction unmountLogic(logic) {\n  var _getContext2 = getContext(),\n    _getContext2$mount = _getContext2.mount,\n    counter = _getContext2$mount.counter,\n    mounted = _getContext2$mount.mounted;\n  var pathStrings = Object.keys(logic.connections).filter(function (k) {\n    return k !== logic.pathString;\n  }).concat([logic.pathString]).reverse();\n  for (var _iterator2 = _createForOfIteratorHelperLoose(pathStrings), _step2; !(_step2 = _iterator2()).done;) {\n    var pathString = _step2.value;\n    counter[pathString] = (counter[pathString] || 0) - 1;\n    if (counter[pathString] === 0) {\n      var _connectedLogic$event5, _connectedLogic$event6, _connectedLogic$event7, _connectedLogic$event8, _getContext$wrapperCo;\n      var connectedLogic = logic.connections[pathString];\n      runPlugins('beforeUnmount', connectedLogic);\n      (_connectedLogic$event5 = (_connectedLogic$event6 = connectedLogic.events).beforeUnmount) === null || _connectedLogic$event5 === void 0 ? void 0 : _connectedLogic$event5.call(_connectedLogic$event6);\n      delete mounted[pathString];\n      delete counter[pathString];\n      if (connectedLogic.reducer) {\n        detachReducer(connectedLogic);\n      }\n      runPlugins('afterUnmount', connectedLogic);\n      (_connectedLogic$event7 = (_connectedLogic$event8 = connectedLogic.events).afterUnmount) === null || _connectedLogic$event7 === void 0 ? void 0 : _connectedLogic$event7.call(_connectedLogic$event8);\n      (_getContext$wrapperCo = getContext().wrapperContexts.get(logic.wrapper)) === null || _getContext$wrapperCo === void 0 ? void 0 : _getContext$wrapperCo.builtLogics[\"delete\"](logic.key);\n    }\n  }\n}\nfunction applyInputToLogic(logic, input) {\n  runPlugins('beforeLogic', logic, input);\n  if (typeof input === 'function') {\n    input(logic);\n  } else {\n    'props' in input && props(input.props)(logic);\n    'key' in input && typeof input.key !== 'undefined' && key(input.key)(logic);\n    'path' in input && input.path && path(input.path)(logic);\n    if (input.inherit) {\n      for (var _iterator = _createForOfIteratorHelperLoose(input.inherit), _step; !(_step = _iterator()).done;) {\n        var inheritLogic = _step.value;\n        for (var _iterator2 = _createForOfIteratorHelperLoose(inheritLogic.inputs), _step2; !(_step2 = _iterator2()).done;) {\n          var inheritInput = _step2.value;\n          applyInputToLogic(logic, inheritInput);\n        }\n      }\n    }\n    runPlugins('legacyBuild', logic, input);\n    if (input.extend) {\n      for (var _iterator3 = _createForOfIteratorHelperLoose(input.extend), _step3; !(_step3 = _iterator3()).done;) {\n        var innerInput = _step3.value;\n        applyInputToLogic(logic, innerInput);\n      }\n    }\n  }\n  runPlugins('afterLogic', logic, input);\n  return logic;\n}\nfunction getBuiltLogic(wrapper, props) {\n  var wrapperContext = getWrapperContext(wrapper);\n  if (wrapperContext.isBuilding) {\n    throw new Error(\"[KEA] Circular build detected.\");\n  }\n  var cachedLogic = getCachedBuiltLogic(wrapper, props);\n  if (cachedLogic) {\n    var oldProps = cachedLogic.props;\n    if (props && (!cachedLogic.props || cachedLogic.props !== props && !shallowCompare(cachedLogic.props, props))) {\n      cachedLogic.props = _extends({}, cachedLogic.props, props);\n    }\n    if (oldProps !== cachedLogic.props && cachedLogic.events.propsChanged) {\n      batchChanges(function () {\n        var _cachedLogic$events$p, _cachedLogic$events;\n        (_cachedLogic$events$p = (_cachedLogic$events = cachedLogic.events).propsChanged) === null || _cachedLogic$events$p === void 0 ? void 0 : _cachedLogic$events$p.call(_cachedLogic$events, cachedLogic.props, oldProps);\n      });\n    }\n    return cachedLogic;\n  }\n  var uniqueId = ++getContext().inputCounter;\n  var path = [].concat(getContext().options.defaultPath, [uniqueId]);\n  path['_keaAutomaticPath'] = true;\n  wrapperContext.isBuilding = true;\n  var logic = {\n    _isKeaBuild: true,\n    key: undefined,\n    keyBuilder: undefined,\n    path: path,\n    pathString: path.join('.'),\n    props: props !== null && props !== void 0 ? props : {},\n    wrapper: wrapper,\n    extend: function extend(input) {\n      return applyInputToLogic(logic, input);\n    },\n    mount: function mount() {\n      if (wrapperContext.isBuilding) {\n        throw new Error(\"[KEA] Tried to mount logic \\\"\" + logic.pathString + \"\\\" before it finished building\");\n      }\n      mountLogic(logic);\n      var unmounted = false;\n      return function () {\n        if (unmounted) {\n          throw new Error(\"[KEA] Tried to unmount logic \\\"\" + logic.pathString + \"\\\" for a second time\");\n        }\n        unmountLogic(logic);\n        unmounted = true;\n      };\n    },\n    unmount: function unmount() {\n      return unmountLogic(logic);\n    },\n    isMounted: function isMounted() {\n      var counter = getContext().mount.counter[logic.pathString];\n      return typeof counter === 'number' && counter > 0;\n    }\n  };\n  var _getContext = getContext(),\n    buildHeap = _getContext.buildHeap;\n  try {\n    buildHeap.push(logic);\n    for (var _iterator4 = _createForOfIteratorHelperLoose(getContext().plugins.activated), _step4; !(_step4 = _iterator4()).done;) {\n      var plugin = _step4.value;\n      if (plugin.defaults) {\n        var newLogicProperties = typeof plugin.defaults === 'function' ? plugin.defaults() : plugin.defaults;\n        Object.assign(logic, newLogicProperties);\n      }\n    }\n    runPlugins('beforeBuild', logic, wrapper.inputs);\n    for (var _iterator5 = _createForOfIteratorHelperLoose(wrapper.inputs), _step5; !(_step5 = _iterator5()).done;) {\n      var input = _step5.value;\n      applyInputToLogic(logic, input);\n    }\n    logic.connections[logic.pathString] = logic;\n    wrapperContext.keyBuilder = logic.keyBuilder;\n    wrapperContext.builtLogics.set(logic.key, logic);\n    runPlugins('afterBuild', logic, wrapper.inputs);\n  } catch (e) {\n    throw e;\n  } finally {\n    wrapperContext.isBuilding = false;\n    buildHeap.pop();\n  }\n  if (buildHeap.length > 0) {\n    if (!buildHeap[buildHeap.length - 1].connections[logic.pathString]) {\n      addConnection(buildHeap[buildHeap.length - 1], logic);\n    }\n  }\n  return logic;\n}\nfunction getCachedBuiltLogic(wrapper, props) {\n  var _wrapperContext$keyBu;\n  var wrapperContext = getWrapperContext(wrapper);\n  var builtLogic = wrapperContext.builtLogics.get(wrapperContext === null || wrapperContext === void 0 ? void 0 : (_wrapperContext$keyBu = wrapperContext.keyBuilder) === null || _wrapperContext$keyBu === void 0 ? void 0 : _wrapperContext$keyBu.call(wrapperContext, props !== null && props !== void 0 ? props : {}));\n  return builtLogic !== null && builtLogic !== void 0 ? builtLogic : null;\n}\nfunction getWrapperContext(wrapper) {\n  var _getContext2 = getContext(),\n    wrapperContexts = _getContext2.wrapperContexts;\n  var wrapperContext = wrapperContexts.get(wrapper);\n  if (!wrapperContext) {\n    wrapperContext = {\n      keyBuilder: undefined,\n      builtLogics: new Map(),\n      isBuilding: false\n    };\n    wrapperContexts.set(wrapper, wrapperContext);\n  }\n  return wrapperContext;\n}\nfunction wrapComponent(Component, wrapper) {\n  runPlugins('beforeWrap', wrapper, Component);\n  injectActionsIntoClass(Component);\n  var Kea = function Kea(props) {\n    var _props$actions;\n    var logic = wrapper.build(props);\n    var values = useAllValues(logic);\n    var actions = _extends({}, (_props$actions = props.actions) !== null && _props$actions !== void 0 ? _props$actions : {}, useActions(logic));\n    runPlugins('beforeRender', logic, props);\n    return /*#__PURE__*/React.createElement(Component, _extends({}, props, values, {\n      dispatch: getContext().store.dispatch,\n      actions: actions\n    }));\n  };\n  Kea._wrapper = wrapper;\n  Kea._wrappedComponent = Component;\n  runPlugins('afterWrap', wrapper, Component, Kea);\n  return Kea;\n}\nfunction injectActionsIntoClass(Component) {\n  function isStateless(Component) {\n    return typeof Component === 'function' && !(Component.prototype && Component.prototype.isReactComponent);\n  }\n  if (!isStateless(Component)) {\n    if (!Object.getOwnPropertyDescriptor(Component.prototype, 'actions')) {\n      Object.defineProperty(Component.prototype, 'actions', {\n        get: function actions() {\n          return this.props.actions;\n        }\n      });\n    }\n  }\n}\nfunction kea(input) {\n  var wrapper = function wrapper(props) {\n    if (typeof props === 'object' || typeof props === 'undefined') {\n      return wrapper.build(props);\n    }\n    return wrapper.wrap(props);\n  };\n  wrapper._isKea = true;\n  wrapper.inputs = Array.isArray(input) ? input : [input];\n  wrapper.wrap = function (Component) {\n    return wrapComponent(Component, wrapper);\n  };\n  wrapper.build = function (props) {\n    return getBuiltLogic(wrapper, props);\n  };\n  wrapper.mount = function () {\n    return wrapper.build().mount();\n  };\n  wrapper.unmount = function () {\n    return wrapper.build().unmount();\n  };\n  wrapper.isMounted = function (props) {\n    var builtLogic = getCachedBuiltLogic(wrapper, props);\n    if (!builtLogic) {\n      return false;\n    }\n    var counter = getContext().mount.counter[builtLogic.pathString];\n    return typeof counter === 'number' && counter > 0;\n  };\n  wrapper.findMounted = function (props) {\n    return wrapper.isMounted(props) ? getCachedBuiltLogic(wrapper, props) : null;\n  };\n  wrapper.extend = function (extendedInput) {\n    var wrapperContext = getContext().wrapperContexts.get(wrapper);\n    if (wrapperContext) {\n      throw new Error(\"[KEA] Can not extend logic once it has been built.\");\n    }\n    if (Array.isArray(extendedInput)) {\n      wrapper.inputs = wrapper.inputs.concat(extendedInput);\n    } else {\n      wrapper.inputs.push(extendedInput);\n    }\n    return wrapper;\n  };\n  if (getContext().options.proxyFields) {\n    proxyFields(wrapper);\n  }\n  return wrapper;\n}\nfunction proxyFieldToLogic(wrapper, key) {\n  if (!wrapper.hasOwnProperty(key)) {\n    Object.defineProperty(wrapper, key, {\n      get: function get() {\n        var logic = wrapper.findMounted();\n        if (!logic && getContext().buildHeap.length > 0) {\n          logic = wrapper.build();\n        }\n        if (logic) {\n          return logic[key];\n        } else {\n          throw new Error(unmountedActionError(String(key), wrapper.build().pathString));\n        }\n      }\n    });\n  }\n}\nfunction proxyFields(wrapper) {\n  var reservedProxiedKeys = ['path', 'pathString', 'props'];\n  for (var _i = 0, _reservedProxiedKeys = reservedProxiedKeys; _i < _reservedProxiedKeys.length; _i++) {\n    var key = _reservedProxiedKeys[_i];\n    proxyFieldToLogic(wrapper, key);\n  }\n  for (var _i2 = 0, _Object$keys = Object.keys(getContext().plugins.logicFields); _i2 < _Object$keys.length; _i2++) {\n    var _key = _Object$keys[_i2];\n    proxyFieldToLogic(wrapper, _key);\n  }\n}\nfunction unmountedActionError(key, path) {\n  return \"[KEA] Can not access \\\"\" + key + \"\\\" on logic \\\"\" + path + \"\\\" because it is not mounted!\\nThis can happen in several situations:\\n- You may need to add the \\\"connect(otherLogic)\\\" logic builder, or \\\"useMountedLogic(otherLogic)\\\" hook to make sure the logic is mounted.\\n- If \\\"otherLogic\\\" is undefined, your bundler may import and execute code in an unfavourable order. Switch to a function: \\\"connect(() => otherLogic)\\\" \\n- It may be that the logic has already unmounted. Do you have a listener that is missing a breakpoint?\";\n}\nfunction getOrCreateContextForLogicWrapper(logic) {\n  var context = getContext().react.contexts.get(logic);\n  if (!context) {\n    context = /*#__PURE__*/React.createContext(undefined);\n    getContext().react.contexts.set(logic, context);\n  }\n  return context;\n}\nfunction BindLogic(_ref) {\n  var logic = _ref.logic,\n    props = _ref.props,\n    children = _ref.children;\n  var LogicContext = getOrCreateContextForLogicWrapper(logic);\n  var builtLogic = logic(props);\n  useMountedLogic(builtLogic);\n  return /*#__PURE__*/React.createElement(LogicContext.Provider, {\n    value: builtLogic\n  }, children);\n}\nvar warned = process.env.NODE_ENV === 'test' || process.env.NODE_ENV === 'production';\nfunction Provider(_ref) {\n  var children = _ref.children;\n  if (!warned) {\n    console.warn(\"[KEA] <Provider> is now a no-op and should be removed. If you need it for Redux, use react-redux's <Provider store={getContext().store} />, or use Kea's useSelector.\");\n    warned = true;\n  }\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, children);\n}\nvar ATTACH_REDUCER = ATTACH_REDUCER$1;\nvar DETACH_REDUCER = DETACH_REDUCER$1;\nresetContext({}, true);\nexport { ATTACH_REDUCER, BindLogic, DETACH_REDUCER, Provider, actions, activatePlugin, addConnection, afterMount, batchChanges, beforeUnmount, closeContext, connect, corePlugin, createActionCreator, createStore, defaults, events, getContext, getPluginContext, isBreakpoint, isBuiltLogic, isLogicWrapper, kea, keaReducer, key, listeners, openContext, path, props, propsChanged, reducers, resetContext, selectors, setPluginContext, shallowCompare, sharedListeners, useActions, useAllValues, useMountedLogic, useSelector, useValues };","map":{"version":3,"names":["applyMiddleware","compose","legacy_createStore","React","React__default","useMemo","useContext","useRef","useEffect","createContext","createSelector","isLogicWrapper","logic","isBuiltLogic","shallowCompare","obj1","obj2","keys1","Object","keys","keys2","length","every","key","hasOwnProperty","_extends","assign","target","i","arguments","source","prototype","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","arr","len","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","next","bind","isArray","done","value","TypeError","reservedKeys","path","pathString","props","inputs","wrapper","wrap","build","mount","unmount","isMounted","findMounted","extend","activatePlugin","pluginToActivate","plugin","_getContext","getContext","plugins","Error","activated","find","p","push","defaults","fields","_i","_fields","process","env","NODE_ENV","logicFields","console","error","events","_i2","_Object$keys","_key","afterPlugin","runPlugins","_len","args","_key2","_getContext2","debug","options","_console","log","concat","forEach","pluginFunction","ATTACH_REDUCER$1","DETACH_REDUCER$1","defaultState","initRootReducerTree","pathStart","_getContext$reducers","reducers","tree","whitelist","regenerateRootReducer","keaReducer","roots","state","action","fullState","attachReducer","reducer","_getContext3","attachStrategy","store","pointer","pathPart","join","dispatch","type","payload","replaceReducer","createReduxStoreReducer","detachReducer","_getContext4","detachStrategy","detached","pointerToHere","j","undefined","_getContext5","_getContext5$reducers","recursiveCreateReducer","regenerateCombinedReducer","treeNode","children","combineKeaReducers","emptyObj","combination","reducerKeys","stateChanged","nextState","_reducerKeys","previousKeyState","nextKeyState","_getContext$reducers2","redux","combined","_getContext$reducers$","_getContext$reducers3","shim","exports","useSyncExternalStoreShim_production_min","e","h","a","b","k","is","l","useState","m","useLayoutEffect","useDebugValue","q","d","f","inst","getSnapshot","c","g","r","t","u","window","document","createElement","useSyncExternalStore","useSyncExternalStoreShim_development","__REACT_DEVTOOLS_GLOBAL_HOOK__","registerInternalModuleStart","ReactSharedInternals","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","format","_len2","printWarning","level","ReactDebugCurrentFrame","stack","getStackAddendum","argsWithFormat","map","item","String","unshift","Function","x","y","objectIs","didWarnOld18Alpha","didWarnUncachedGetSnapshot","subscribe","getServerSnapshot","startTransition","cachedValue","_useState","forceUpdate","checkIfSnapshotChanged","handleStoreChange","latestGetSnapshot","prevValue","nextValue","useSyncExternalStore$1","canUseDOM","isServerEnvironment","useSyncExternalStore$2","registerInternalModuleStop","pauseCounter","isPaused","getStoreState$1","getStoreState","getState","useSelector","selector","useValues","builtLogic","useMountedLogic","response","_loop","defineProperty","get","selectors","useAllValues","_Object$keys2","useActions","blankContext","builtLogicContext","react","contexts","defaultBuiltLogic","current","batchChanges","_unmount$current","useMountedLogicEffect","useMountedLogicEffectCleanup","timeout","callback","previousState","newState","clearTimeout","setTimeout","reduxDevToolsCompose","createDefaultOptions","paths","preloadedState","middleware","enhancers","createStore","opts","context","composeEnchancer","finalCreateStore","pauseListenersEnhancer","initialState","storeSubscribe","observer","pausedObserver","_excluded","setContext","newContext","contextId","openContext","initial","_options","_options$createStore","createStoreOptions","otherOptions","inputCounter","reducerDefaults","wrapperContexts","WeakMap","buildHeap","counter","mounted","__store","proxyFields","flatDefaults","defaultPath","set","corePlugin","_iterator","_step","closeContext","resetContext","getPluginContext","setPluginContext","pluginContext","input","event","newEvent","oldProps","oldEvent","afterMount","beforeUnmount","propsChanged","LISTENERS_BREAKPOINT","isBreakpoint","message","listeners","_logic$cache","_logic$cache$listener","addListeners","removeListeners","cache","listenerBreakpointCounter","actionKey","listenerArray","actions","start","listenerWrapperArray","listener","index","listenerKey","breakCounter","throwIfCalled","breakpoint","ms","Promise","resolve","then","trackPendingListener","sharedListeners","_logic$listeners","_getPluginContext","byPath","byAction","_i3","_Object$entries","entries","_logic$listeners2","_logic$actionTypes$ke","_Object$entries$_i","actionTypes","_getPluginContext2","_i4","_Object$keys3","_logic$listeners3","_logic$actionTypes$ke2","_getPluginContext3","pendingPromises","remove","payloadCreator","actionCreator","createActionCreator","createActionType","actionCreators","builtAction","actionKeys","_isKeaAction","toSpaces","replace","toLowerCase","connect","connectLogic","otherLogic","addConnection","deconstructMapping","_step2$value","_step2","to","includes","_otherLogic$actionCre","_logic$actionCreators","_iterator2","values","_response","_loop2","_step3$value","_step3","throwError","enumerable","_iterator3","mapping","array","parts","split","connections","contextDefaults","getContextDefaults","part","selectorInputs","builtSelectors","addSelectorAndValue","entry","_entry$","func","memoizeOptions","filter","argTypes","msg","rootReducer","rootSelector","pathSelector","_logic$cache$reducers","_logic$cache$reducers2","_logic$cache$reducers3","object","initialValue","reducerOptions","_object$","_object$Math$max","Math","max","_logic$reducerOptions","v","_reducer","mappingKey","getDefaultState","meta","defaultValue","reduce","keyBuilder","isAutomaticPath","newProps","Map","beforeReduxStore","_Object$values","innerListener","legacyBuild","mountLogic","count","_getContext$mount","pathStrings","_connectedLogic$event","_connectedLogic$event2","_connectedLogic$event3","_connectedLogic$event4","connectedLogic","beforeMount","unmountLogic","_getContext2$mount","reverse","_connectedLogic$event5","_connectedLogic$event6","_connectedLogic$event7","_connectedLogic$event8","_getContext$wrapperCo","afterUnmount","builtLogics","applyInputToLogic","inherit","inheritLogic","inheritInput","innerInput","getBuiltLogic","wrapperContext","getWrapperContext","isBuilding","cachedLogic","getCachedBuiltLogic","_cachedLogic$events$p","_cachedLogic$events","uniqueId","_isKeaBuild","unmounted","_iterator4","_step4","newLogicProperties","_iterator5","_step5","pop","_wrapperContext$keyBu","wrapComponent","Component","injectActionsIntoClass","Kea","_props$actions","_wrapper","_wrappedComponent","isStateless","isReactComponent","getOwnPropertyDescriptor","kea","_isKea","extendedInput","proxyFieldToLogic","unmountedActionError","reservedProxiedKeys","_reservedProxiedKeys","getOrCreateContextForLogicWrapper","BindLogic","_ref","LogicContext","Provider","warned","warn","Fragment","ATTACH_REDUCER","DETACH_REDUCER"],"sources":["/Users/devaanshpatel02/Desktop/trial/ethsf2022-main/node_modules/kea/lib/index.esm.js"],"sourcesContent":["import { applyMiddleware, compose, legacy_createStore } from 'redux';\nimport * as React from 'react';\nimport React__default, { useMemo, useContext, useRef, useEffect, createContext } from 'react';\nimport { createSelector } from 'reselect';\n\nfunction isLogicWrapper(logic) {\n  return '_isKea' in logic;\n}\nfunction isBuiltLogic(logic) {\n  return '_isKeaBuild' in logic;\n}\nvar shallowCompare = function shallowCompare(obj1, obj2) {\n  var keys1 = Object.keys(obj1);\n  var keys2 = Object.keys(obj2);\n  return keys1.length === keys2.length && keys1.every(function (key) {\n    return obj2.hasOwnProperty(key) && obj1[key] === obj2[key];\n  });\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar reservedKeys = {\n  key: true,\n  path: true,\n  pathString: true,\n  props: true,\n  inputs: true,\n  wrapper: true,\n  wrap: true,\n  build: true,\n  mount: true,\n  unmount: true,\n  isMounted: true,\n  findMounted: true,\n  extend: true\n};\nfunction activatePlugin(pluginToActivate) {\n  var plugin = typeof pluginToActivate === 'function' ? pluginToActivate() : pluginToActivate;\n\n  var _getContext = getContext(),\n      plugins = _getContext.plugins;\n\n  if (!plugin.name) {\n    throw new Error('[KEA] Tried to activate a plugin without a name!');\n  }\n\n  if (plugins.activated.find(function (p) {\n    return p.name === plugin.name;\n  })) {\n    throw new Error(\"[KEA] Tried to activate plugin \\\"\" + plugin.name + \"\\\", but it was already installed!\");\n  }\n\n  plugins.activated.push(plugin);\n\n  if (plugin.defaults) {\n    var fields = Object.keys(typeof plugin.defaults === 'function' ? plugin.defaults() : plugin.defaults);\n\n    for (var _i = 0, _fields = fields; _i < _fields.length; _i++) {\n      var key = _fields[_i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (plugins.logicFields[key] || reservedKeys[key]) {\n          console.error(\"[KEA] Plugin \\\"\" + plugin.name + \"\\\" redefines logic field \\\"\" + key + \"\\\". Previously defined by \" + (plugins.logicFields[key] || 'core'));\n        }\n      }\n\n      plugins.logicFields[key] = plugin.name;\n    }\n  }\n\n  if (plugin.events) {\n    for (var _i2 = 0, _Object$keys = Object.keys(plugin.events); _i2 < _Object$keys.length; _i2++) {\n      var _key = _Object$keys[_i2];\n\n      if (!plugins.events[_key]) {\n        plugins.events[_key] = [];\n      }\n\n      plugins.events[_key].push(plugin.events[_key]);\n    }\n\n    plugin.events.afterPlugin && plugin.events.afterPlugin();\n  }\n}\nfunction runPlugins(key) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  var _getContext2 = getContext(),\n      plugins = _getContext2.plugins,\n      debug = _getContext2.options.debug;\n\n  if (debug) {\n    var _console;\n\n    (_console = console).log.apply(_console, [\"[KEA] Event: \" + key].concat(args));\n  }\n\n  if (plugins && plugins.events[key]) {\n    plugins.events[key].forEach(function (pluginFunction) {\n      pluginFunction.apply(void 0, args);\n    });\n  }\n}\n\nvar ATTACH_REDUCER$1 = '@KEA/ATTACH_REDUCER';\nvar DETACH_REDUCER$1 = '@KEA/DETACH_REDUCER';\nvar defaultState = {};\nfunction initRootReducerTree(pathStart) {\n  var _getContext = getContext(),\n      _getContext$reducers = _getContext.reducers,\n      tree = _getContext$reducers.tree,\n      whitelist = _getContext$reducers.whitelist;\n\n  if (!tree[pathStart]) {\n    if (whitelist && !whitelist[pathStart]) {\n      throw new Error(\"[KEA] Can not start reducer's path with \\\"\" + pathStart + \"\\\"! Please add it to the whitelist\");\n    }\n\n    tree[pathStart] = {};\n    regenerateRootReducer(pathStart);\n  }\n}\nfunction keaReducer(pathStart) {\n  if (pathStart === void 0) {\n    pathStart = 'scenes';\n  }\n\n  var _getContext2 = getContext(),\n      roots = _getContext2.reducers.roots;\n\n  initRootReducerTree(pathStart);\n  return function (state, action, fullState) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    return roots[pathStart] ? roots[pathStart](state, action, fullState) : state;\n  };\n}\nfunction attachReducer(logic) {\n  var path = logic.path,\n      reducer = logic.reducer;\n\n  var _getContext3 = getContext(),\n      tree = _getContext3.reducers.tree,\n      attachStrategy = _getContext3.options.attachStrategy,\n      store = _getContext3.store;\n\n  var pathStart = path[0].toString();\n  initRootReducerTree(pathStart);\n  var pointer = tree;\n\n  for (var i = 0; i < path.length; i++) {\n    var pathPart = path[i].toString();\n\n    if (i === path.length - 1) {\n      if (pointer[pathPart]) {\n        if (i === 0 && typeof pointer[pathPart] === 'object' && Object.keys(pointer[pathPart]).length === 0) ; else if (typeof pointer[pathPart] !== 'function') {\n          console.error(\"[KEA] Can not add reducer to \\\"\" + path.join('.') + \"\\\". There is something in the way:\", pointer[pathPart]);\n          return;\n        }\n      }\n\n      pointer[pathPart] = reducer;\n    } else {\n      if (!pointer[pathPart]) {\n        pointer[pathPart] = {};\n      }\n\n      pointer = pointer[pathPart];\n    }\n  }\n\n  regenerateRootReducer(pathStart);\n\n  if (attachStrategy === 'dispatch' || attachStrategy === 'replace') {\n    runPlugins('beforeAttach', logic);\n\n    if (attachStrategy === 'dispatch') {\n      store && store.dispatch({\n        type: ATTACH_REDUCER$1,\n        payload: {\n          path: path,\n          reducer: reducer\n        }\n      });\n    } else if (attachStrategy === 'replace') {\n      store && store.replaceReducer(createReduxStoreReducer());\n    }\n\n    runPlugins('afterAttach', logic);\n  }\n}\nfunction detachReducer(logic) {\n  var path = logic.path;\n\n  var _getContext4 = getContext(),\n      tree = _getContext4.reducers.tree,\n      detachStrategy = _getContext4.options.detachStrategy,\n      store = _getContext4.store;\n\n  var pathStart = path[0].toString();\n\n  if (detachStrategy === 'persist') {\n    return;\n  }\n\n  var detached = false;\n\n  for (var i = path.length - 2; i >= 0; i--) {\n    var pointerToHere = tree;\n\n    for (var j = 0; j <= i; j++) {\n      pointerToHere = pointerToHere && pointerToHere[path[j].toString()] || undefined;\n    }\n\n    if (pointerToHere) {\n      if (Object.keys(pointerToHere).length === 0) ; else if (Object.keys(pointerToHere).length >= 1 && i === path.length - 2 && typeof pointerToHere[path[i + 1].toString()] === 'function') {\n        delete pointerToHere[path[i + 1].toString()];\n        detached = true;\n      } else if (detached && Object.keys(pointerToHere).length >= 1 && i < path.length - 2 && Object.keys(pointerToHere[path[i + 1].toString()]).length === 0) {\n        delete pointerToHere[path[i + 1].toString()];\n      } else {\n        break;\n      }\n    }\n  }\n\n  regenerateRootReducer(pathStart);\n\n  if (detached) {\n    if (detachStrategy === 'dispatch' || detachStrategy === 'replace') {\n      runPlugins('beforeDetach', logic);\n\n      if (detachStrategy === 'dispatch') {\n        store && store.dispatch({\n          type: DETACH_REDUCER$1,\n          payload: {\n            path: path\n          }\n        });\n      } else if (detachStrategy === 'replace') {\n        store && store.replaceReducer(createReduxStoreReducer());\n      }\n\n      runPlugins('afterDetach', logic);\n    }\n  }\n}\nfunction regenerateRootReducer(pathStart) {\n  var _getContext5 = getContext(),\n      _getContext5$reducers = _getContext5.reducers,\n      tree = _getContext5$reducers.tree,\n      roots = _getContext5$reducers.roots,\n      whitelist = _getContext5$reducers.whitelist;\n\n  if (pathStart !== 'kea' && !whitelist && typeof tree[pathStart] === 'object' && Object.keys(tree[pathStart]).length === 0) {\n    delete roots[pathStart];\n  } else {\n    roots[pathStart] = recursiveCreateReducer(tree[pathStart]);\n  }\n\n  regenerateCombinedReducer();\n}\nfunction recursiveCreateReducer(treeNode) {\n  if (typeof treeNode === 'function') {\n    return treeNode;\n  }\n\n  var children = {};\n  Object.keys(treeNode).forEach(function (key) {\n    if (typeof treeNode[key] !== 'undefined') {\n      children[key] = recursiveCreateReducer(treeNode[key]);\n    }\n  });\n\n  if (Object.keys(children).length > 0) {\n    return combineKeaReducers(children);\n  } else {\n    var emptyObj = {};\n    return function () {\n      return emptyObj;\n    };\n  }\n}\nfunction combineKeaReducers(reducers) {\n  return function combination(state, action, fullState) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    var reducerKeys = Object.keys(reducers);\n    var stateChanged = Object.keys(state).length !== reducerKeys.length;\n    var nextState = {};\n\n    for (var _i = 0, _reducerKeys = reducerKeys; _i < _reducerKeys.length; _i++) {\n      var key = _reducerKeys[_i];\n      var reducer = reducers[key];\n      var previousKeyState = state[key];\n      var nextKeyState = reducer(previousKeyState, action, fullState || state);\n\n      if (typeof nextKeyState === 'undefined') {\n        throw new Error(\"[KEA] Reducer \\\"\" + key + \"\\\" returned undefined for action \\\"\" + (action && action.type) + \"\\\"\");\n      }\n\n      nextState[key] = nextKeyState;\n      stateChanged = stateChanged || nextKeyState !== previousKeyState;\n    }\n\n    return stateChanged ? nextState : state;\n  };\n}\n\nfunction regenerateCombinedReducer() {\n  var _getContext$reducers2 = getContext().reducers,\n      redux = _getContext$reducers2.redux,\n      roots = _getContext$reducers2.roots;\n\n  var reducers = _extends({}, redux, roots);\n\n  getContext().reducers.combined = combineKeaReducers(reducers);\n}\n\nfunction createReduxStoreReducer() {\n  regenerateCombinedReducer();\n  return function (state, action) {\n    var _getContext$reducers$, _getContext$reducers3;\n\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    return (_getContext$reducers$ = (_getContext$reducers3 = getContext().reducers).combined) === null || _getContext$reducers$ === void 0 ? void 0 : _getContext$reducers$.call(_getContext$reducers3, state, action, state);\n  };\n}\n\nvar shim = {exports: {}};\n\nvar useSyncExternalStoreShim_production_min = {};\n\nvar e = React__default;\r\nfunction h(a, b) { return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b; }\r\nvar k = \"function\" === typeof Object.is ? Object.is : h, l = e.useState, m = e.useEffect, n = e.useLayoutEffect, p = e.useDebugValue;\r\nfunction q(a, b) { var d = b(), f = l({ inst: { value: d, getSnapshot: b } }), c = f[0].inst, g = f[1]; n(function () { c.value = d; c.getSnapshot = b; r(c) && g({ inst: c }); }, [a, d, b]); m(function () { r(c) && g({ inst: c }); return a(function () { r(c) && g({ inst: c }); }); }, [a]); p(d); return d; }\r\nfunction r(a) { var b = a.getSnapshot; a = a.value; try {\r\n    var d = b();\r\n    return !k(a, d);\r\n}\r\ncatch (f) {\r\n    return !0;\r\n} }\r\nfunction t(a, b) { return b(); }\r\nvar u = \"undefined\" === typeof window || \"undefined\" === typeof window.document || \"undefined\" === typeof window.document.createElement ? t : q;\r\nuseSyncExternalStoreShim_production_min.useSyncExternalStore = void 0 !== e.useSyncExternalStore ? e.useSyncExternalStore : u;\n\nvar useSyncExternalStoreShim_development = {};\n\nif (process.env.NODE_ENV !== \"production\") {\r\n    (function () {\r\n        if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\r\n            typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart ===\r\n                'function') {\r\n            __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\r\n        }\r\n        var React = React__default;\r\n        var ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n        function error(format) {\r\n            {\r\n                {\r\n                    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\r\n                        args[_key2 - 1] = arguments[_key2];\r\n                    }\r\n                    printWarning('error', format, args);\r\n                }\r\n            }\r\n        }\r\n        function printWarning(level, format, args) {\r\n            {\r\n                var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\r\n                var stack = ReactDebugCurrentFrame.getStackAddendum();\r\n                if (stack !== '') {\r\n                    format += '%s';\r\n                    args = args.concat([stack]);\r\n                }\r\n                var argsWithFormat = args.map(function (item) {\r\n                    return String(item);\r\n                });\r\n                argsWithFormat.unshift('Warning: ' + format);\r\n                Function.prototype.apply.call(console[level], console, argsWithFormat);\r\n            }\r\n        }\r\n        function is(x, y) {\r\n            return x === y && (x !== 0 || 1 / x === 1 / y) || x !== x && y !== y;\r\n        }\r\n        var objectIs = typeof Object.is === 'function' ? Object.is : is;\r\n        var useState = React.useState, useEffect = React.useEffect, useLayoutEffect = React.useLayoutEffect, useDebugValue = React.useDebugValue;\r\n        var didWarnOld18Alpha = false;\r\n        var didWarnUncachedGetSnapshot = false;\r\n        function useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\r\n            {\r\n                if (!didWarnOld18Alpha) {\r\n                    if (React.startTransition !== undefined) {\r\n                        didWarnOld18Alpha = true;\r\n                        error('You are using an outdated, pre-release alpha of React 18 that ' + 'does not support useSyncExternalStore. The ' + 'use-sync-external-store shim will not work correctly. Upgrade ' + 'to a newer pre-release.');\r\n                    }\r\n                }\r\n            }\r\n            var value = getSnapshot();\r\n            {\r\n                if (!didWarnUncachedGetSnapshot) {\r\n                    var cachedValue = getSnapshot();\r\n                    if (!objectIs(value, cachedValue)) {\r\n                        error('The result of getSnapshot should be cached to avoid an infinite loop');\r\n                        didWarnUncachedGetSnapshot = true;\r\n                    }\r\n                }\r\n            }\r\n            var _useState = useState({\r\n                inst: {\r\n                    value: value,\r\n                    getSnapshot: getSnapshot\r\n                }\r\n            }), inst = _useState[0].inst, forceUpdate = _useState[1];\r\n            useLayoutEffect(function () {\r\n                inst.value = value;\r\n                inst.getSnapshot = getSnapshot;\r\n                if (checkIfSnapshotChanged(inst)) {\r\n                    forceUpdate({\r\n                        inst: inst\r\n                    });\r\n                }\r\n            }, [subscribe, value, getSnapshot]);\r\n            useEffect(function () {\r\n                if (checkIfSnapshotChanged(inst)) {\r\n                    forceUpdate({\r\n                        inst: inst\r\n                    });\r\n                }\r\n                var handleStoreChange = function () {\r\n                    if (checkIfSnapshotChanged(inst)) {\r\n                        forceUpdate({\r\n                            inst: inst\r\n                        });\r\n                    }\r\n                };\r\n                return subscribe(handleStoreChange);\r\n            }, [subscribe]);\r\n            useDebugValue(value);\r\n            return value;\r\n        }\r\n        function checkIfSnapshotChanged(inst) {\r\n            var latestGetSnapshot = inst.getSnapshot;\r\n            var prevValue = inst.value;\r\n            try {\r\n                var nextValue = latestGetSnapshot();\r\n                return !objectIs(prevValue, nextValue);\r\n            }\r\n            catch (error) {\r\n                return true;\r\n            }\r\n        }\r\n        function useSyncExternalStore$1(subscribe, getSnapshot, getServerSnapshot) {\r\n            return getSnapshot();\r\n        }\r\n        var canUseDOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\r\n        var isServerEnvironment = !canUseDOM;\r\n        var shim = isServerEnvironment ? useSyncExternalStore$1 : useSyncExternalStore;\r\n        var useSyncExternalStore$2 = React.useSyncExternalStore !== undefined ? React.useSyncExternalStore : shim;\r\n        useSyncExternalStoreShim_development.useSyncExternalStore = useSyncExternalStore$2;\r\n        if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\r\n            typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop ===\r\n                'function') {\r\n            __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\r\n        }\r\n    })();\r\n}\n\nif (process.env.NODE_ENV === 'production') {\r\n    shim.exports = useSyncExternalStoreShim_production_min;\r\n}\r\nelse {\r\n    shim.exports = useSyncExternalStoreShim_development;\r\n}\n\nvar pauseCounter = 0;\nvar isPaused = function isPaused() {\n  return pauseCounter !== 0;\n};\n\nvar getStoreState$1 = function getStoreState() {\n  return getContext().store.getState();\n};\n\nfunction useSelector(selector) {\n  return shim.exports.useSyncExternalStore(getContext().store.subscribe, function () {\n    return selector(getStoreState$1());\n  });\n}\nfunction useValues(logic) {\n  var builtLogic = useMountedLogic(logic);\n  return useMemo(function () {\n    var response = {};\n\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return useSelector(builtLogic.selectors[key]);\n        }\n      });\n    };\n\n    for (var _i = 0, _Object$keys = Object.keys(builtLogic.selectors); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n\n    return response;\n  }, [builtLogic.pathString]);\n}\nfunction useAllValues(logic) {\n  var builtLogic = useMountedLogic(logic);\n  var response = {};\n\n  for (var _i2 = 0, _Object$keys2 = Object.keys(builtLogic.selectors); _i2 < _Object$keys2.length; _i2++) {\n    var key = _Object$keys2[_i2];\n    response[key] = useSelector(builtLogic.selectors[key]);\n  }\n\n  return response;\n}\nfunction useActions(logic) {\n  var builtLogic = useMountedLogic(logic);\n  return builtLogic['actions'];\n}\nvar blankContext = /*#__PURE__*/createContext(undefined);\nfunction useMountedLogic(logic) {\n  var builtLogicContext = isLogicWrapper(logic) ? getContext().react.contexts.get(logic) : null;\n  var defaultBuiltLogic = useContext(builtLogicContext || blankContext);\n  var builtLogic = isLogicWrapper(logic) ? defaultBuiltLogic || logic.build() : logic;\n  var unmount = useRef(undefined);\n\n  if (!unmount.current) {\n    batchChanges(function () {\n      unmount.current = builtLogic.mount();\n    });\n  }\n\n  var pathString = useRef(builtLogic.pathString);\n\n  if (pathString.current !== builtLogic.pathString) {\n    batchChanges(function () {\n      var _unmount$current;\n\n      (_unmount$current = unmount.current) === null || _unmount$current === void 0 ? void 0 : _unmount$current.call(unmount);\n      unmount.current = builtLogic.mount();\n      pathString.current = builtLogic.pathString;\n    });\n  }\n\n  useEffect(function useMountedLogicEffect() {\n    if (!unmount.current) {\n      batchChanges(function () {\n        unmount.current = builtLogic.mount();\n        pathString.current = builtLogic.pathString;\n      });\n    }\n\n    return function useMountedLogicEffectCleanup() {\n      batchChanges(function () {\n        unmount.current && unmount.current();\n        unmount.current = undefined;\n      });\n    };\n  }, []);\n  return builtLogic;\n}\nvar timeout;\nfunction batchChanges(callback) {\n  var previousState = getStoreState$1();\n  pauseCounter += 1;\n\n  try {\n    callback();\n  } catch (e) {} finally {\n    pauseCounter -= 1;\n  }\n\n  var newState = getStoreState$1();\n\n  if (previousState !== newState) {\n    timeout && window.clearTimeout(timeout);\n    timeout = window.setTimeout(function () {\n      return getContext().store.dispatch({\n        type: '@KEA/FLUSH'\n      });\n    }, 0);\n  }\n}\n\nvar reduxDevToolsCompose = typeof window !== 'undefined' && window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__'] ? window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__'] : compose;\n\nvar createDefaultOptions = function createDefaultOptions() {\n  return {\n    paths: [],\n    reducers: {},\n    preloadedState: undefined,\n    middleware: [],\n    compose: reduxDevToolsCompose,\n    enhancers: [],\n    plugins: []\n  };\n};\n\nfunction createStore(opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  var context = getContext();\n\n  if (!context) {\n    console.error('[KEA] Can not create a store without a Kea context.');\n    return;\n  }\n\n  if (context['__store']) {\n    console.error('[KEA] Already attached to a store! Exiting. Please reset the kea context before creating a store.');\n    return;\n  }\n\n  var options = _extends({}, createDefaultOptions(), opts);\n\n  context.reducers.redux = _extends({}, options.reducers);\n  runPlugins('beforeReduxStore', options);\n\n  if (options.middleware.length > 0) {\n    options.enhancers = [applyMiddleware.apply(void 0, options.middleware)].concat(options.enhancers);\n  }\n\n  var composeEnchancer = options.compose || compose;\n  var finalCreateStore = composeEnchancer.apply(void 0, [pauseListenersEnhancer].concat(options.enhancers))(legacy_createStore);\n\n  if (options.paths && options.paths.length > 0) {\n    context.reducers.whitelist = {};\n    options.paths.forEach(function (pathStart) {\n      context.reducers.whitelist[pathStart] = true;\n      initRootReducerTree(pathStart);\n    });\n  } else {\n    initRootReducerTree('kea');\n  }\n\n  var store = finalCreateStore(createReduxStoreReducer(), _extends({}, options.preloadedState));\n  context['__store'] = store;\n  runPlugins('afterReduxStore', options, store);\n  return store;\n}\nvar pauseListenersEnhancer = function pauseListenersEnhancer(createStore) {\n  return function (reducer, initialState) {\n    var store = createStore(reducer, initialState);\n    var storeSubscribe = store.subscribe;\n\n    store.subscribe = function (observer) {\n      var pausedObserver = function pausedObserver() {\n        if (!isPaused()) {\n          observer();\n        }\n      };\n\n      return storeSubscribe(pausedObserver);\n    };\n\n    return store;\n  };\n};\n\nvar _excluded = [\"plugins\", \"createStore\", \"defaults\"];\nvar context;\nfunction getContext() {\n  return context;\n}\nvar getStoreState = function getStoreState() {\n  return getContext().store.getState();\n};\nfunction setContext(newContext) {\n  context = newContext;\n}\nvar contextId = 0;\nfunction openContext(options, initial) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (initial === void 0) {\n    initial = false;\n  }\n\n  if (context) {\n    console.error('[KEA] overwriting already opened context. This may lead to errors.');\n  }\n\n  var _options = options,\n      plugins = _options.plugins,\n      _options$createStore = _options.createStore,\n      createStoreOptions = _options$createStore === void 0 ? true : _options$createStore,\n      defaults = _options.defaults,\n      otherOptions = _objectWithoutPropertiesLoose(_options, _excluded);\n\n  var newContext = {\n    contextId: \"kea-context-\" + contextId++,\n    plugins: {\n      activated: [],\n      events: {},\n      logicFields: {},\n      contexts: {}\n    },\n    inputCounter: 0,\n    reducerDefaults: defaults,\n    wrapperContexts: new WeakMap(),\n    buildHeap: [],\n    mount: {\n      counter: {},\n      mounted: {}\n    },\n    react: {\n      contexts: new WeakMap()\n    },\n    reducers: {\n      tree: {},\n      roots: {},\n      redux: {},\n      whitelist: false,\n      combined: undefined\n    },\n    store: undefined,\n    __store: undefined,\n    options: _extends({\n      debug: false,\n      proxyFields: true,\n      flatDefaults: false,\n      attachStrategy: 'dispatch',\n      detachStrategy: 'dispatch',\n      defaultPath: ['kea', 'logic']\n    }, otherOptions)\n  };\n  Object.defineProperty(newContext, 'store', {\n    get: function get() {\n      var store = newContext['__store'];\n\n      if (!store && createStoreOptions) {\n        return createStore(typeof createStoreOptions === 'object' ? createStoreOptions : {});\n      }\n\n      return store;\n    },\n    set: function set(store) {\n      newContext['__store'] = store;\n    }\n  });\n  setContext(newContext);\n  activatePlugin(corePlugin);\n  runPlugins('afterOpenContext', newContext, options);\n\n  if (plugins) {\n    for (var _iterator = _createForOfIteratorHelperLoose(plugins), _step; !(_step = _iterator()).done;) {\n      var plugin = _step.value;\n      activatePlugin(plugin);\n    }\n  }\n\n  if (!initial && createStoreOptions) {\n    context.store;\n  }\n\n  return context;\n}\nfunction closeContext() {\n  if (context) {\n    runPlugins('beforeCloseContext', context);\n  }\n\n  context = undefined;\n}\nfunction resetContext(options, initial) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (initial === void 0) {\n    initial = false;\n  }\n\n  if (context) {\n    closeContext();\n  }\n\n  return openContext(options, initial);\n}\nfunction getPluginContext(name) {\n  var _getContext = getContext(),\n      plugins = _getContext.plugins;\n\n  if (!plugins.contexts[name]) {\n    plugins.contexts[name] = {};\n  }\n\n  return plugins.contexts[name];\n}\nfunction setPluginContext(name, pluginContext) {\n  var _getContext2 = getContext(),\n      plugins = _getContext2.plugins;\n\n  plugins.contexts[name] = pluginContext;\n}\n\nfunction events(input) {\n  return function (logic) {\n    var events = typeof input === 'function' ? input(logic) : input;\n\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n      var event = events[key];\n      var newEvent = Array.isArray(event) ? function (props, oldProps) {\n        return event.forEach(function (e) {\n          return e(props, oldProps);\n        });\n      } : event;\n\n      if (logic.events[key]) {\n        var oldEvent = logic.events[key];\n\n        logic.events[key] = function (props, oldProps) {\n          oldEvent === null || oldEvent === void 0 ? void 0 : oldEvent(props, oldProps);\n          newEvent === null || newEvent === void 0 ? void 0 : newEvent(props, oldProps);\n        };\n      } else if (newEvent) {\n        logic.events[key] = newEvent;\n      }\n    };\n\n    for (var _i = 0, _Object$keys = Object.keys(events); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n  };\n}\nfunction afterMount(input) {\n  return events(function (logic) {\n    return {\n      afterMount: function afterMount() {\n        return input(logic);\n      }\n    };\n  });\n}\nfunction beforeUnmount(input) {\n  return events(function (logic) {\n    return {\n      beforeUnmount: function beforeUnmount() {\n        return input(logic);\n      }\n    };\n  });\n}\nfunction propsChanged(input) {\n  return events(function (logic) {\n    return {\n      propsChanged: function propsChanged(props, oldProps) {\n        return input(logic, oldProps);\n      }\n    };\n  });\n}\n\nvar LISTENERS_BREAKPOINT = 'kea-listeners breakpoint broke';\nvar isBreakpoint = function isBreakpoint(error) {\n  return error.message === LISTENERS_BREAKPOINT;\n};\nfunction listeners(input) {\n  return function (logic) {\n    var _logic$cache, _logic$cache$listener;\n\n    if (!logic.listeners) {\n      logic.listeners = {};\n      afterMount(function () {\n        addListeners(logic);\n      })(logic);\n      beforeUnmount(function () {\n        removeListeners(logic);\n\n        if (logic.cache.listenerBreakpointCounter) {\n          for (var _i = 0, _Object$keys = Object.keys(logic.cache.listenerBreakpointCounter); _i < _Object$keys.length; _i++) {\n            var key = _Object$keys[_i];\n            logic.cache.listenerBreakpointCounter[key] += 1;\n          }\n        }\n      })(logic);\n    }\n\n    (_logic$cache$listener = (_logic$cache = logic.cache).listenerBreakpointCounter) !== null && _logic$cache$listener !== void 0 ? _logic$cache$listener : _logic$cache.listenerBreakpointCounter = {};\n    var listeners = typeof input === 'function' ? input(logic) : input;\n\n    var _getContext = getContext(),\n        contextId = _getContext.contextId;\n\n    var _loop = function _loop() {\n      var actionKey = _Object$keys2[_i2];\n      var listenerArray = Array.isArray(listeners[actionKey]) ? listeners[actionKey] : [listeners[actionKey]];\n      var key = actionKey;\n\n      if (typeof logic.actions[key] !== 'undefined') {\n        key = logic.actions[key].toString();\n      }\n\n      var start = logic.listeners[key] ? logic.listeners[key].length : 0;\n      var listenerWrapperArray = listenerArray.map(function (listener, index) {\n        var listenerKey = contextId + \"/\" + key + \"/\" + (start + index);\n        return function (action, previousState) {\n          var breakCounter = (logic.cache.listenerBreakpointCounter[listenerKey] || 0) + 1;\n          logic.cache.listenerBreakpointCounter[listenerKey] = breakCounter;\n\n          var throwIfCalled = function throwIfCalled() {\n            if (logic.cache.listenerBreakpointCounter[listenerKey] !== breakCounter || contextId !== getContext().contextId) {\n              throw new Error(LISTENERS_BREAKPOINT);\n            }\n          };\n\n          var breakpoint = function breakpoint(ms) {\n            if (typeof ms !== 'undefined') {\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, ms);\n              }).then(function () {\n                throwIfCalled();\n              });\n            } else {\n              throwIfCalled();\n            }\n          };\n\n          var response;\n\n          try {\n            response = listener(action.payload, breakpoint, action, previousState);\n\n            if (response && response.then && typeof response.then === 'function') {\n              trackPendingListener(logic, actionKey, response);\n              return response[\"catch\"](function (e) {\n                if (e.message !== LISTENERS_BREAKPOINT) {\n                  throw e;\n                }\n              });\n            }\n          } catch (e) {\n            if (e.message !== LISTENERS_BREAKPOINT) {\n              throw e;\n            }\n          }\n\n          return response;\n        };\n      });\n\n      if (logic.listeners[key]) {\n        logic.listeners[key] = [].concat(logic.listeners[key], listenerWrapperArray);\n      } else {\n        logic.listeners[key] = listenerWrapperArray;\n      }\n    };\n\n    for (var _i2 = 0, _Object$keys2 = Object.keys(listeners); _i2 < _Object$keys2.length; _i2++) {\n      _loop();\n    }\n  };\n}\nfunction sharedListeners(input) {\n  return function (logic) {\n    logic.sharedListeners = _extends({}, logic.sharedListeners || {}, typeof input === 'function' ? input(logic) : input);\n  };\n}\n\nfunction addListeners(logic) {\n  var _logic$listeners;\n\n  var _getPluginContext = getPluginContext('listeners'),\n      byPath = _getPluginContext.byPath,\n      byAction = _getPluginContext.byAction;\n\n  byPath[logic.pathString] = (_logic$listeners = logic.listeners) !== null && _logic$listeners !== void 0 ? _logic$listeners : {};\n\n  for (var _i3 = 0, _Object$entries = Object.entries((_logic$listeners2 = logic.listeners) !== null && _logic$listeners2 !== void 0 ? _logic$listeners2 : {}); _i3 < _Object$entries.length; _i3++) {\n    var _logic$listeners2, _logic$actionTypes$ke;\n\n    var _Object$entries$_i = _Object$entries[_i3],\n        key = _Object$entries$_i[0],\n        listenerArray = _Object$entries$_i[1];\n    var type = (_logic$actionTypes$ke = logic.actionTypes[key]) !== null && _logic$actionTypes$ke !== void 0 ? _logic$actionTypes$ke : key;\n\n    if (!byAction[type]) {\n      byAction[type] = {};\n    }\n\n    byAction[type][logic.pathString] = listenerArray;\n  }\n}\n\nfunction removeListeners(logic) {\n  var _getPluginContext2 = getPluginContext('listeners'),\n      byPath = _getPluginContext2.byPath,\n      byAction = _getPluginContext2.byAction;\n\n  for (var _i4 = 0, _Object$keys3 = Object.keys((_logic$listeners3 = logic.listeners) !== null && _logic$listeners3 !== void 0 ? _logic$listeners3 : {}); _i4 < _Object$keys3.length; _i4++) {\n    var _logic$listeners3, _logic$actionTypes$ke2;\n\n    var key = _Object$keys3[_i4];\n    var type = (_logic$actionTypes$ke2 = logic.actionTypes[key]) !== null && _logic$actionTypes$ke2 !== void 0 ? _logic$actionTypes$ke2 : key;\n\n    if (byAction[type]) {\n      delete byAction[type][logic.pathString];\n\n      if (Object.keys(byAction[type]).length === 0) {\n        delete byAction[type];\n      }\n    }\n  }\n\n  delete byPath[logic.pathString];\n}\n\nfunction trackPendingListener(logic, actionKey, response) {\n  var _getPluginContext3 = getPluginContext('listeners'),\n      pendingPromises = _getPluginContext3.pendingPromises;\n\n  pendingPromises.set(response, [logic, actionKey]);\n\n  var remove = function remove() {\n    pendingPromises[\"delete\"](response);\n  };\n\n  response.then(remove)[\"catch\"](remove);\n}\n\nfunction actions(input) {\n  return function (logic) {\n    var actions = typeof input === 'function' ? input(logic) : input;\n\n    var _loop = function _loop() {\n      var _Object$entries$_i = _Object$entries[_i],\n          key = _Object$entries$_i[0],\n          payloadCreator = _Object$entries$_i[1];\n      var actionCreator = typeof payloadCreator === 'function' && '_isKeaAction' in payloadCreator ? payloadCreator : createActionCreator(createActionType(key, logic.pathString), payloadCreator !== null && payloadCreator !== void 0 ? payloadCreator : true);\n      var type = actionCreator.toString();\n      logic.actionCreators[key] = actionCreator;\n\n      logic.actions[key] = function () {\n        var builtAction = actionCreator.apply(void 0, arguments);\n        getContext().store.dispatch(builtAction);\n      };\n\n      logic.actions[key].toString = function () {\n        return type;\n      };\n\n      logic.actionKeys[type] = key;\n      logic.actionTypes[key] = type;\n    };\n\n    for (var _i = 0, _Object$entries = Object.entries(actions); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n  };\n}\nfunction createActionCreator(type, payloadCreator) {\n  var action = function action() {\n    return {\n      type: type,\n      payload: typeof payloadCreator === 'function' ? payloadCreator.apply(void 0, arguments) : {\n        value: true\n      }\n    };\n  };\n\n  action.toString = function () {\n    return type;\n  };\n\n  action._isKeaAction = true;\n  return action;\n}\nfunction createActionType(key, pathString) {\n  var toSpaces = function toSpaces(key) {\n    return key.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) {\n      return ' ' + y.toLowerCase();\n    }).replace(/^ /, '');\n  };\n\n  return toSpaces(key) + \" (\" + pathString + \")\";\n}\n\nfunction connect(input) {\n  return function (logic) {\n    var props = logic.props || {};\n    var connect = typeof input === 'function' ? input(props) : input;\n    var connectLogic = Array.isArray(connect) ? connect : '_isKeaBuild' in connect || '_isKea' in connect ? [connect] : connect.logic;\n\n    if (connectLogic) {\n      for (var _iterator = _createForOfIteratorHelperLoose(connectLogic), _step; !(_step = _iterator()).done;) {\n        var otherLogic = _step.value;\n\n        if ('_isKea' in otherLogic) {\n          otherLogic = otherLogic(props);\n        }\n\n        addConnection(logic, otherLogic);\n      }\n    }\n\n    if ('_isKeaBuild' in connect || '_isKea' in connect || Array.isArray(connect)) {\n      return;\n    }\n\n    if (connect.actions) {\n      var response = deconstructMapping(connect.actions);\n\n      var _loop = function _loop() {\n        var _step2$value = _step2.value,\n            otherLogic = _step2$value[0],\n            from = _step2$value[1],\n            to = _step2$value[2];\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof otherLogic !== 'function' && typeof otherLogic !== 'object') {\n            throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can not connect to \" + typeof otherLogic + \" to request action \\\"\" + from + \"\\\"\");\n          }\n        }\n\n        if (isLogicWrapper(otherLogic)) {\n          otherLogic = otherLogic.build(props);\n        }\n\n        if (isBuiltLogic(otherLogic)) {\n          addConnection(logic, otherLogic);\n\n          if (getContext().buildHeap.includes(otherLogic)) {\n            logic.actionCreators[to] = function () {\n              var _otherLogic$actionCre;\n\n              return (_otherLogic$actionCre = otherLogic.actionCreators)[from].apply(_otherLogic$actionCre, arguments);\n            };\n\n            logic.actionCreators[to].toString = function () {\n              return createActionType(from, otherLogic.pathString);\n            };\n\n            logic.actionTypes[to] = logic.actionCreators[to].toString();\n          } else {\n            logic.actionCreators[to] = otherLogic.actionCreators[from];\n            logic.actionTypes[to] = otherLogic.actionTypes[from];\n          }\n        } else {\n          logic.actionCreators[to] = otherLogic[from];\n\n          if (logic.actionCreators[to]._isKeaAction) {\n            logic.actionTypes[to] = logic.actionCreators[to].toString();\n          } else {\n            logic.actionTypes[to] = logic.actionCreators[to]().type;\n          }\n        }\n\n        logic.actionKeys[logic.actionTypes[to]] = to;\n\n        if (typeof logic.actionCreators[to] === 'undefined') {\n          throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\", connecting to action \\\"\" + from + \"\\\" returns 'undefined'\");\n        }\n\n        logic.actions[to] = function () {\n          var _logic$actionCreators;\n\n          var builtAction = (_logic$actionCreators = logic.actionCreators)[to].apply(_logic$actionCreators, arguments);\n\n          getContext().store.dispatch(builtAction);\n        };\n\n        logic.actions[to].toString = function () {\n          return logic.actionTypes[to];\n        };\n      };\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(response), _step2; !(_step2 = _iterator2()).done;) {\n        _loop();\n      }\n    }\n\n    if (connect.values) {\n      var _response = deconstructMapping(connect.values);\n\n      var _loop2 = function _loop2() {\n        var _step3$value = _step3.value,\n            otherLogic = _step3$value[0],\n            from = _step3$value[1],\n            to = _step3$value[2];\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof otherLogic !== 'function' && typeof otherLogic !== 'object') {\n            throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can not connect to \" + typeof otherLogic + \" to request prop \\\"\" + from + \"\\\"\");\n          }\n        }\n\n        if (isLogicWrapper(otherLogic)) {\n          otherLogic = otherLogic(props);\n        }\n\n        if (isBuiltLogic(otherLogic)) {\n          addConnection(logic, otherLogic);\n          var selector = from === '*' ? otherLogic.selector : otherLogic.selectors[from];\n\n          var throwError = function throwError() {\n            throw new Error(\"Connected selector \\\"\" + to + \"\\\" on logic \\\"\" + logic.pathString + \"\\\" is undefined.\");\n          };\n\n          if (selector) {\n            logic.selectors[to] = selector;\n          } else if (getContext().buildHeap.includes(otherLogic)) {\n            logic.selectors[to] = function (state, props) {\n              return otherLogic.selectors[from] ? otherLogic.selectors[from](state, props) : throwError();\n            };\n          } else {\n            throwError();\n          }\n        } else if (typeof otherLogic === 'function') {\n          logic.selectors[to] = from === '*' ? otherLogic : function (state, props) {\n            var values = otherLogic(state, props);\n            return values && values[from];\n          };\n        }\n\n        if (logic.selectors[to] && !logic.values.hasOwnProperty(to)) {\n          Object.defineProperty(logic.values, to, {\n            get: function get() {\n              return logic.selectors[to](getStoreState(), logic.props);\n            },\n            enumerable: true\n          });\n        }\n      };\n\n      for (var _iterator3 = _createForOfIteratorHelperLoose(_response), _step3; !(_step3 = _iterator3()).done;) {\n        _loop2();\n      }\n    }\n  };\n}\n\nfunction deconstructMapping(mapping) {\n  if (mapping.length % 2 === 1) {\n    console.error(mapping);\n    throw new Error(\"[KEA] Uneven mapping given to connect\");\n  }\n\n  var response = [];\n\n  for (var i = 0; i < mapping.length; i += 2) {\n    var logic = mapping[i];\n    var array = mapping[i + 1];\n\n    if (!Array.isArray(array)) {\n      console.error(mapping);\n      throw new Error('[KEA] Invalid mapping given to connect. Make sure every second element is an array!');\n    }\n\n    for (var j = 0; j < array.length; j++) {\n      if (array[j].includes(' as ')) {\n        var parts = array[j].split(' as ');\n        response.push([logic, parts[0], parts[1]]);\n      } else {\n        response.push([logic, array[j], array[j]]);\n      }\n    }\n  }\n\n  return response;\n}\n\nfunction addConnection(logic, otherLogic) {\n  if (!otherLogic.connections || Object.keys(otherLogic.connections).length === 0) {\n    return;\n  }\n\n  if (logic.connections[otherLogic.pathString]) {\n    return;\n  }\n\n  Object.keys(otherLogic.connections).forEach(function (path) {\n    if (!logic.connections[path]) {\n      logic.connections[path] = otherLogic.connections[path];\n    }\n  });\n}\n\nfunction defaults(input) {\n  return function (logic) {\n    var defaults = typeof input === 'function' ? input(logic) : input;\n\n    if (typeof defaults === 'function') {\n      logic.defaults['*'] = defaults;\n    } else if (typeof defaults === 'object') {\n      var contextDefaults = getContextDefaults(logic);\n\n      for (var _i = 0, _Object$entries = Object.entries(defaults); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _Object$entries[_i],\n            key = _Object$entries$_i[0],\n            value = _Object$entries$_i[1];\n        logic.defaults[key] = contextDefaults && typeof contextDefaults[key] !== 'undefined' ? contextDefaults[key] : value;\n      }\n    } else {\n      throw new Error(\"[KEA] Unknown defaults of type \\\"\" + typeof defaults + \"\\\" for logic \\\"\" + logic.pathString + \"\\\"\");\n    }\n  };\n}\nfunction getContextDefaults(logic) {\n  var _getContext = getContext(),\n      reducerDefaults = _getContext.reducerDefaults;\n\n  if (reducerDefaults && !('_keaAutomaticPath' in logic.path)) {\n    if (getContext().options.flatDefaults) {\n      if (reducerDefaults[logic.pathString]) {\n        return reducerDefaults[logic.pathString];\n      }\n    } else {\n      for (var _iterator = _createForOfIteratorHelperLoose(logic.path), _step; !(_step = _iterator()).done;) {\n        var part = _step.value;\n        reducerDefaults = reducerDefaults[part.toString()];\n\n        if (typeof reducerDefaults !== 'object') {\n          return;\n        }\n      }\n\n      return reducerDefaults;\n    }\n  }\n}\n\nfunction selectors(input) {\n  return function (logic) {\n    var selectorInputs = typeof input === 'function' ? input(logic) : input;\n    var builtSelectors = {};\n\n    var _loop = function _loop() {\n      var key = _Object$keys[_i];\n\n      if (typeof logic.selectors[key] !== 'undefined') {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" selector \\\"\" + key + \"\\\" already exists\");\n      }\n\n      addSelectorAndValue(logic, key, function () {\n        return builtSelectors[key].apply(builtSelectors, arguments);\n      });\n    };\n\n    for (var _i = 0, _Object$keys = Object.keys(selectorInputs); _i < _Object$keys.length; _i++) {\n      _loop();\n    }\n\n    var _loop2 = function _loop2() {\n      var entry = _Object$entries[_i2];\n      var key = entry[0],\n          _entry$ = entry[1],\n          input = _entry$[0],\n          func = _entry$[1],\n          memoizeOptions = _entry$[2];\n      var args = input(logic.selectors);\n\n      if (args.filter(function (a) {\n        return typeof a !== 'function';\n      }).length > 0) {\n        var argTypes = args.map(function (a) {\n          return typeof a;\n        }).join(', ');\n        var msg = \"[KEA] Logic \\\"\" + logic.pathString + \"\\\", selector \\\"\" + key + \"\\\" has incorrect input: [\" + argTypes + \"].\";\n        throw new Error(msg);\n      }\n\n      builtSelectors[key] = createSelector(args, func, {\n        memoizeOptions: memoizeOptions\n      });\n      addSelectorAndValue(logic, key, function (state, props) {\n        if (state === void 0) {\n          state = getStoreState();\n        }\n\n        if (props === void 0) {\n          props = logic.props;\n        }\n\n        return builtSelectors[key](state, props);\n      });\n\n      if (!logic.values.hasOwnProperty(key)) {\n        Object.defineProperty(logic.values, key, {\n          get: function get() {\n            return logic.selectors[key](getStoreState(), logic.props);\n          },\n          enumerable: true\n        });\n      }\n    };\n\n    for (var _i2 = 0, _Object$entries = Object.entries(selectorInputs); _i2 < _Object$entries.length; _i2++) {\n      _loop2();\n    }\n  };\n}\nfunction addSelectorAndValue(logic, key, selector) {\n  logic.selectors[key] = selector;\n\n  if (!logic.values.hasOwnProperty(key)) {\n    Object.defineProperty(logic.values, key, {\n      get: function get() {\n        return logic.selectors[key](getStoreState(), logic.props);\n      },\n      enumerable: true\n    });\n  }\n}\n\nfunction rootReducer() {\n  return function (logic) {\n    logic.reducer = function (state, action, fullState) {\n      return combineKeaReducers(logic.reducers)(state, action, fullState);\n    };\n\n    if (!logic.selector) {\n      rootSelector()(logic);\n    }\n  };\n}\nfunction rootSelector() {\n  return function (logic) {\n    logic.selector = function (state) {\n      if (state === void 0) {\n        state = getStoreState();\n      }\n\n      return pathSelector(logic.path, state);\n    };\n  };\n}\nfunction reducers(input) {\n  return function (logic) {\n    var reducers = typeof input === 'function' ? input(logic) : input;\n\n    if (!logic.reducer) {\n      rootReducer()(logic);\n    }\n\n    if (!logic.selector) {\n      rootSelector()(logic);\n    }\n\n    var contextDefaults = getContextDefaults(logic);\n\n    var _loop = function _loop() {\n      var _logic$cache, _logic$cache$reducers, _logic$cache$reducers2, _logic$cache$reducers3;\n\n      var _Object$entries$_i = _Object$entries[_i],\n          key = _Object$entries$_i[0],\n          object = _Object$entries$_i[1];\n      var initialValue = void 0;\n      var reducerOptions = void 0;\n      var reducer = void 0;\n\n      if (Array.isArray(object)) {\n        var _object$, _object$Math$max;\n\n        initialValue = (_object$ = object[0]) !== null && _object$ !== void 0 ? _object$ : null;\n        reducer = (_object$Math$max = object[Math.max(1, object.length - 1)]) !== null && _object$Math$max !== void 0 ? _object$Math$max : {};\n\n        if (object.length === 3) {\n          reducerOptions = object[1];\n        }\n      } else if (typeof object === 'object') {\n        initialValue = null;\n        reducer = object;\n      } else {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" reducer \\\"\" + key + \"\\\" is set to unsupported value\");\n      }\n\n      if (reducerOptions) {\n        var _logic$reducerOptions;\n\n        logic.reducerOptions[key] = _extends({}, (_logic$reducerOptions = logic.reducerOptions[key]) !== null && _logic$reducerOptions !== void 0 ? _logic$reducerOptions : {}, reducerOptions);\n      }\n\n      if (typeof logic.defaults[key] === 'undefined') {\n        if (contextDefaults && typeof contextDefaults[key] !== 'undefined') {\n          logic.defaults[key] = contextDefaults[key];\n        } else if (typeof logic.defaults['*'] === 'function') {\n          logic.defaults[key] = function (state, props) {\n            var v = logic.defaults['*'](state, props)[key];\n            return typeof v === 'undefined' ? initialValue : typeof v === 'function' ? v(state, props) : v;\n          };\n        } else {\n          logic.defaults[key] = initialValue;\n        }\n      }\n\n      (_logic$cache$reducers = (_logic$cache = logic.cache).reducers) !== null && _logic$cache$reducers !== void 0 ? _logic$cache$reducers : _logic$cache.reducers = {};\n      (_logic$cache$reducers3 = (_logic$cache$reducers2 = logic.cache.reducers)[key]) !== null && _logic$cache$reducers3 !== void 0 ? _logic$cache$reducers3 : _logic$cache$reducers2[key] = {};\n      var mapping = logic.cache.reducers[key];\n\n      for (var _i2 = 0, _Object$keys = Object.keys((_reducer = reducer) !== null && _reducer !== void 0 ? _reducer : {}); _i2 < _Object$keys.length; _i2++) {\n        var _reducer;\n\n        var _key = _Object$keys[_i2];\n        var mappingKey = logic.actions[_key] ? logic.actions[_key].toString() : _key;\n        mapping[mappingKey] = reducer[_key];\n      }\n\n      if (typeof mapping['undefined'] !== 'undefined' && typeof logic.actions['undefined'] === 'undefined') {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" reducer \\\"\" + key + \"\\\" is waiting for an action that is undefined: [\" + Object.keys(mapping).join(', ') + \"]\");\n      }\n\n      if (!logic.reducers[key] && logic.selectors[key]) {\n        throw new Error(\"[KEA] Logic \\\"\" + logic.pathString + \"\\\" can't add reducer \\\"\" + key + \"\\\" because a selector with the same name exists.\");\n      }\n\n      if (Object.keys(mapping).length === 0) {\n        logic.reducers[key] = function () {\n          return logic.defaults[key];\n        };\n      } else {\n        logic.reducers[key] = function (state, action, fullState) {\n          if (typeof state === 'undefined') {\n            state = getDefaultState(logic.defaults[key], fullState, key, logic);\n          }\n\n          if (mapping[action.type]) {\n            return mapping[action.type](state, action.payload, action.meta);\n          } else if (logic.actionKeys[action.type] && mapping[logic.actionKeys[action.type]]) {\n            return mapping[logic.actionKeys[action.type]](state, action.payload, action.meta);\n          } else {\n            return state;\n          }\n        };\n      }\n\n      if (!logic.selectors[key]) {\n        addSelectorAndValue(logic, key, createSelector(logic.selector, function (state) {\n          return state[key];\n        }));\n      }\n    };\n\n    for (var _i = 0, _Object$entries = Object.entries(reducers); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n  };\n}\n\nfunction getDefaultState(defaultValue, fullState, key, logic) {\n  if (typeof defaultValue === 'function') {\n    if (fullState) {\n      return defaultValue(fullState, logic.props);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error(\"[KEA] Store not initialized and can't get default value of \\\"\" + key + \"\\\" in \\\"\" + logic.pathString + \"\\\"\");\n      }\n\n      return undefined;\n    }\n  }\n\n  return defaultValue;\n}\n\nfunction pathSelector(path, state) {\n  return [state].concat(path).reduce(function (v, a) {\n    if (a in v) {\n      return v[a];\n    }\n\n    throw new Error(\"[KEA] Can not find path \\\"\" + path.join('.') + \"\\\" in the store.\");\n  });\n}\n\nfunction key(input) {\n  return function (logic) {\n    var key = input(logic.props);\n\n    if (typeof logic.keyBuilder !== 'undefined') {\n      throw new Error(\"[KEA] Already defined key builder for logic \\\"\" + logic.pathString + \"\\\".\");\n    }\n\n    if (typeof key === 'undefined') {\n      throw new Error(\"[KEA] Undefined key for logic \\\"\" + logic.pathString + \"\\\"\");\n    }\n\n    if (Object.keys(logic.actions).length > 0) {\n      throw new Error(\"[KEA] Can not add key to logic \\\"\" + logic.pathString + \"\\\" after adding actions: \" + Object.keys(logic.actions).join(', '));\n    }\n\n    logic.key = key;\n    logic.keyBuilder = input;\n    var isAutomaticPath = ('_keaAutomaticPath' in logic.path);\n    logic.path = [].concat(logic.path, [logic.key]);\n    logic.pathString = logic.path.join('.');\n\n    if (isAutomaticPath) {\n      logic.path['_keaAutomaticPath'] = true;\n    }\n  };\n}\n\nfunction props(input) {\n  return function (logic) {\n    var newProps = _extends({}, input, logic.props);\n\n    if (!shallowCompare(logic.props, newProps)) {\n      logic.props = newProps;\n    }\n  };\n}\n\nfunction path(input) {\n  return function (logic) {\n    if (logic.path && !('_keaAutomaticPath' in logic.path)) {\n      return;\n    }\n\n    if (Object.keys(logic.actions).length > 0) {\n      throw new Error(\"[KEA] Can not add path to logic \\\"\" + logic.pathString + \"\\\" after adding actions: \" + Object.keys(logic.actions).join(', '));\n    }\n\n    if (typeof input === 'function') {\n      logic.path = input(logic.key).filter(function (l) {\n        return typeof l !== 'undefined';\n      });\n    } else {\n      logic.path = typeof logic.key !== 'undefined' ? [].concat(input, [logic.key]) : input;\n    }\n\n    logic.pathString = logic.path.join('.');\n  };\n}\n\nvar corePlugin = {\n  name: 'core',\n  defaults: function defaults() {\n    return {\n      actionCreators: {},\n      actionKeys: {},\n      actionTypes: {},\n      actions: {},\n      cache: {},\n      connections: {},\n      defaults: {},\n      listeners: undefined,\n      reducers: {},\n      reducer: undefined,\n      reducerOptions: {},\n      selector: undefined,\n      selectors: {},\n      sharedListeners: undefined,\n      values: {},\n      events: {}\n    };\n  },\n  events: {\n    afterPlugin: function afterPlugin() {\n      setPluginContext('listeners', {\n        byAction: {},\n        byPath: {},\n        pendingPromises: new Map()\n      });\n    },\n    beforeReduxStore: function beforeReduxStore(options) {\n      options.middleware.push(function (store) {\n        return function (next) {\n          return function (action) {\n            var previousState = store.getState();\n            var response = next(action);\n\n            var _getPluginContext = getPluginContext('listeners'),\n                byAction = _getPluginContext.byAction;\n\n            var listeners = byAction[action.type];\n\n            if (listeners) {\n              for (var _i = 0, _Object$values = Object.values(listeners); _i < _Object$values.length; _i++) {\n                var listenerArray = _Object$values[_i];\n\n                for (var _iterator = _createForOfIteratorHelperLoose(listenerArray), _step; !(_step = _iterator()).done;) {\n                  var innerListener = _step.value;\n                  innerListener(action, previousState);\n                }\n              }\n            }\n\n            return response;\n          };\n        };\n      });\n    },\n    legacyBuild: function legacyBuild(logic, input) {\n      'connect' in input && input.connect && connect(input.connect)(logic);\n      runPlugins('legacyBuildAfterConnect', logic, input);\n      'actions' in input && input.actions && actions(input.actions)(logic);\n      'defaults' in input && input.defaults && defaults(input.defaults)(logic);\n      runPlugins('legacyBuildAfterDefaults', logic, input);\n      'reducers' in input && input.reducers && reducers(input.reducers)(logic);\n      'selectors' in input && input.selectors && selectors(input.selectors)(logic);\n      'sharedListeners' in input && sharedListeners(input.sharedListeners)(logic);\n      'listeners' in input && input.listeners && listeners(input.listeners)(logic);\n      'events' in input && input.events && events(input.events)(logic);\n    }\n  }\n};\n\nfunction mountLogic(logic, count) {\n  if (count === void 0) {\n    count = 1;\n  }\n\n  var _getContext = getContext(),\n      _getContext$mount = _getContext.mount,\n      counter = _getContext$mount.counter,\n      mounted = _getContext$mount.mounted;\n\n  var pathStrings = Object.keys(logic.connections).filter(function (k) {\n    return k !== logic.pathString;\n  }).concat([logic.pathString]);\n\n  for (var _iterator = _createForOfIteratorHelperLoose(pathStrings), _step; !(_step = _iterator()).done;) {\n    var pathString = _step.value;\n    counter[pathString] = (counter[pathString] || 0) + count;\n\n    if (counter[pathString] === count) {\n      var _connectedLogic$event, _connectedLogic$event2, _connectedLogic$event3, _connectedLogic$event4;\n\n      var connectedLogic = logic.connections[pathString];\n\n      if (typeof connectedLogic === 'undefined') {\n        throw new Error(\"[KEA] Can not find connected logic at \\\"\" + pathString + \"\\\". Got \\\"undefined\\\" instead of the logic when trying to mount \\\"\" + logic.pathString + \"\\\".\");\n      }\n\n      runPlugins('beforeMount', connectedLogic);\n      (_connectedLogic$event = (_connectedLogic$event2 = connectedLogic.events).beforeMount) === null || _connectedLogic$event === void 0 ? void 0 : _connectedLogic$event.call(_connectedLogic$event2);\n      mounted[pathString] = connectedLogic;\n\n      if (connectedLogic.reducer) {\n        attachReducer(connectedLogic);\n      }\n\n      runPlugins('afterMount', connectedLogic);\n      (_connectedLogic$event3 = (_connectedLogic$event4 = connectedLogic.events).afterMount) === null || _connectedLogic$event3 === void 0 ? void 0 : _connectedLogic$event3.call(_connectedLogic$event4);\n    }\n  }\n}\nfunction unmountLogic(logic) {\n  var _getContext2 = getContext(),\n      _getContext2$mount = _getContext2.mount,\n      counter = _getContext2$mount.counter,\n      mounted = _getContext2$mount.mounted;\n\n  var pathStrings = Object.keys(logic.connections).filter(function (k) {\n    return k !== logic.pathString;\n  }).concat([logic.pathString]).reverse();\n\n  for (var _iterator2 = _createForOfIteratorHelperLoose(pathStrings), _step2; !(_step2 = _iterator2()).done;) {\n    var pathString = _step2.value;\n    counter[pathString] = (counter[pathString] || 0) - 1;\n\n    if (counter[pathString] === 0) {\n      var _connectedLogic$event5, _connectedLogic$event6, _connectedLogic$event7, _connectedLogic$event8, _getContext$wrapperCo;\n\n      var connectedLogic = logic.connections[pathString];\n      runPlugins('beforeUnmount', connectedLogic);\n      (_connectedLogic$event5 = (_connectedLogic$event6 = connectedLogic.events).beforeUnmount) === null || _connectedLogic$event5 === void 0 ? void 0 : _connectedLogic$event5.call(_connectedLogic$event6);\n      delete mounted[pathString];\n      delete counter[pathString];\n\n      if (connectedLogic.reducer) {\n        detachReducer(connectedLogic);\n      }\n\n      runPlugins('afterUnmount', connectedLogic);\n      (_connectedLogic$event7 = (_connectedLogic$event8 = connectedLogic.events).afterUnmount) === null || _connectedLogic$event7 === void 0 ? void 0 : _connectedLogic$event7.call(_connectedLogic$event8);\n      (_getContext$wrapperCo = getContext().wrapperContexts.get(logic.wrapper)) === null || _getContext$wrapperCo === void 0 ? void 0 : _getContext$wrapperCo.builtLogics[\"delete\"](logic.key);\n    }\n  }\n}\n\nfunction applyInputToLogic(logic, input) {\n  runPlugins('beforeLogic', logic, input);\n\n  if (typeof input === 'function') {\n    input(logic);\n  } else {\n    'props' in input && props(input.props)(logic);\n    'key' in input && typeof input.key !== 'undefined' && key(input.key)(logic);\n    'path' in input && input.path && path(input.path)(logic);\n\n    if (input.inherit) {\n      for (var _iterator = _createForOfIteratorHelperLoose(input.inherit), _step; !(_step = _iterator()).done;) {\n        var inheritLogic = _step.value;\n\n        for (var _iterator2 = _createForOfIteratorHelperLoose(inheritLogic.inputs), _step2; !(_step2 = _iterator2()).done;) {\n          var inheritInput = _step2.value;\n          applyInputToLogic(logic, inheritInput);\n        }\n      }\n    }\n\n    runPlugins('legacyBuild', logic, input);\n\n    if (input.extend) {\n      for (var _iterator3 = _createForOfIteratorHelperLoose(input.extend), _step3; !(_step3 = _iterator3()).done;) {\n        var innerInput = _step3.value;\n        applyInputToLogic(logic, innerInput);\n      }\n    }\n  }\n\n  runPlugins('afterLogic', logic, input);\n  return logic;\n}\n\nfunction getBuiltLogic(wrapper, props) {\n  var wrapperContext = getWrapperContext(wrapper);\n\n  if (wrapperContext.isBuilding) {\n    throw new Error(\"[KEA] Circular build detected.\");\n  }\n\n  var cachedLogic = getCachedBuiltLogic(wrapper, props);\n\n  if (cachedLogic) {\n    var oldProps = cachedLogic.props;\n\n    if (props && (!cachedLogic.props || cachedLogic.props !== props && !shallowCompare(cachedLogic.props, props))) {\n      cachedLogic.props = _extends({}, cachedLogic.props, props);\n    }\n\n    if (oldProps !== cachedLogic.props && cachedLogic.events.propsChanged) {\n      batchChanges(function () {\n        var _cachedLogic$events$p, _cachedLogic$events;\n\n        (_cachedLogic$events$p = (_cachedLogic$events = cachedLogic.events).propsChanged) === null || _cachedLogic$events$p === void 0 ? void 0 : _cachedLogic$events$p.call(_cachedLogic$events, cachedLogic.props, oldProps);\n      });\n    }\n\n    return cachedLogic;\n  }\n\n  var uniqueId = ++getContext().inputCounter;\n  var path = [].concat(getContext().options.defaultPath, [uniqueId]);\n  path['_keaAutomaticPath'] = true;\n  wrapperContext.isBuilding = true;\n  var logic = {\n    _isKeaBuild: true,\n    key: undefined,\n    keyBuilder: undefined,\n    path: path,\n    pathString: path.join('.'),\n    props: props !== null && props !== void 0 ? props : {},\n    wrapper: wrapper,\n    extend: function extend(input) {\n      return applyInputToLogic(logic, input);\n    },\n    mount: function mount() {\n      if (wrapperContext.isBuilding) {\n        throw new Error(\"[KEA] Tried to mount logic \\\"\" + logic.pathString + \"\\\" before it finished building\");\n      }\n\n      mountLogic(logic);\n      var unmounted = false;\n      return function () {\n        if (unmounted) {\n          throw new Error(\"[KEA] Tried to unmount logic \\\"\" + logic.pathString + \"\\\" for a second time\");\n        }\n\n        unmountLogic(logic);\n        unmounted = true;\n      };\n    },\n    unmount: function unmount() {\n      return unmountLogic(logic);\n    },\n    isMounted: function isMounted() {\n      var counter = getContext().mount.counter[logic.pathString];\n      return typeof counter === 'number' && counter > 0;\n    }\n  };\n\n  var _getContext = getContext(),\n      buildHeap = _getContext.buildHeap;\n\n  try {\n    buildHeap.push(logic);\n\n    for (var _iterator4 = _createForOfIteratorHelperLoose(getContext().plugins.activated), _step4; !(_step4 = _iterator4()).done;) {\n      var plugin = _step4.value;\n\n      if (plugin.defaults) {\n        var newLogicProperties = typeof plugin.defaults === 'function' ? plugin.defaults() : plugin.defaults;\n        Object.assign(logic, newLogicProperties);\n      }\n    }\n\n    runPlugins('beforeBuild', logic, wrapper.inputs);\n\n    for (var _iterator5 = _createForOfIteratorHelperLoose(wrapper.inputs), _step5; !(_step5 = _iterator5()).done;) {\n      var input = _step5.value;\n      applyInputToLogic(logic, input);\n    }\n\n    logic.connections[logic.pathString] = logic;\n    wrapperContext.keyBuilder = logic.keyBuilder;\n    wrapperContext.builtLogics.set(logic.key, logic);\n    runPlugins('afterBuild', logic, wrapper.inputs);\n  } catch (e) {\n    throw e;\n  } finally {\n    wrapperContext.isBuilding = false;\n    buildHeap.pop();\n  }\n\n  if (buildHeap.length > 0) {\n    if (!buildHeap[buildHeap.length - 1].connections[logic.pathString]) {\n      addConnection(buildHeap[buildHeap.length - 1], logic);\n    }\n  }\n\n  return logic;\n}\nfunction getCachedBuiltLogic(wrapper, props) {\n  var _wrapperContext$keyBu;\n\n  var wrapperContext = getWrapperContext(wrapper);\n  var builtLogic = wrapperContext.builtLogics.get(wrapperContext === null || wrapperContext === void 0 ? void 0 : (_wrapperContext$keyBu = wrapperContext.keyBuilder) === null || _wrapperContext$keyBu === void 0 ? void 0 : _wrapperContext$keyBu.call(wrapperContext, props !== null && props !== void 0 ? props : {}));\n  return builtLogic !== null && builtLogic !== void 0 ? builtLogic : null;\n}\nfunction getWrapperContext(wrapper) {\n  var _getContext2 = getContext(),\n      wrapperContexts = _getContext2.wrapperContexts;\n\n  var wrapperContext = wrapperContexts.get(wrapper);\n\n  if (!wrapperContext) {\n    wrapperContext = {\n      keyBuilder: undefined,\n      builtLogics: new Map(),\n      isBuilding: false\n    };\n    wrapperContexts.set(wrapper, wrapperContext);\n  }\n\n  return wrapperContext;\n}\n\nfunction wrapComponent(Component, wrapper) {\n  runPlugins('beforeWrap', wrapper, Component);\n  injectActionsIntoClass(Component);\n\n  var Kea = function Kea(props) {\n    var _props$actions;\n\n    var logic = wrapper.build(props);\n    var values = useAllValues(logic);\n\n    var actions = _extends({}, (_props$actions = props.actions) !== null && _props$actions !== void 0 ? _props$actions : {}, useActions(logic));\n\n    runPlugins('beforeRender', logic, props);\n    return /*#__PURE__*/React.createElement(Component, _extends({}, props, values, {\n      dispatch: getContext().store.dispatch,\n      actions: actions\n    }));\n  };\n\n  Kea._wrapper = wrapper;\n  Kea._wrappedComponent = Component;\n  runPlugins('afterWrap', wrapper, Component, Kea);\n  return Kea;\n}\n\nfunction injectActionsIntoClass(Component) {\n  function isStateless(Component) {\n    return typeof Component === 'function' && !(Component.prototype && Component.prototype.isReactComponent);\n  }\n\n  if (!isStateless(Component)) {\n    if (!Object.getOwnPropertyDescriptor(Component.prototype, 'actions')) {\n      Object.defineProperty(Component.prototype, 'actions', {\n        get: function actions() {\n          return this.props.actions;\n        }\n      });\n    }\n  }\n}\n\nfunction kea(input) {\n  var wrapper = function wrapper(props) {\n    if (typeof props === 'object' || typeof props === 'undefined') {\n      return wrapper.build(props);\n    }\n\n    return wrapper.wrap(props);\n  };\n\n  wrapper._isKea = true;\n  wrapper.inputs = Array.isArray(input) ? input : [input];\n\n  wrapper.wrap = function (Component) {\n    return wrapComponent(Component, wrapper);\n  };\n\n  wrapper.build = function (props) {\n    return getBuiltLogic(wrapper, props);\n  };\n\n  wrapper.mount = function () {\n    return wrapper.build().mount();\n  };\n\n  wrapper.unmount = function () {\n    return wrapper.build().unmount();\n  };\n\n  wrapper.isMounted = function (props) {\n    var builtLogic = getCachedBuiltLogic(wrapper, props);\n\n    if (!builtLogic) {\n      return false;\n    }\n\n    var counter = getContext().mount.counter[builtLogic.pathString];\n    return typeof counter === 'number' && counter > 0;\n  };\n\n  wrapper.findMounted = function (props) {\n    return wrapper.isMounted(props) ? getCachedBuiltLogic(wrapper, props) : null;\n  };\n\n  wrapper.extend = function (extendedInput) {\n    var wrapperContext = getContext().wrapperContexts.get(wrapper);\n\n    if (wrapperContext) {\n      throw new Error(\"[KEA] Can not extend logic once it has been built.\");\n    }\n\n    if (Array.isArray(extendedInput)) {\n      wrapper.inputs = wrapper.inputs.concat(extendedInput);\n    } else {\n      wrapper.inputs.push(extendedInput);\n    }\n\n    return wrapper;\n  };\n\n  if (getContext().options.proxyFields) {\n    proxyFields(wrapper);\n  }\n\n  return wrapper;\n}\nfunction proxyFieldToLogic(wrapper, key) {\n  if (!wrapper.hasOwnProperty(key)) {\n    Object.defineProperty(wrapper, key, {\n      get: function get() {\n        var logic = wrapper.findMounted();\n\n        if (!logic && getContext().buildHeap.length > 0) {\n          logic = wrapper.build();\n        }\n\n        if (logic) {\n          return logic[key];\n        } else {\n          throw new Error(unmountedActionError(String(key), wrapper.build().pathString));\n        }\n      }\n    });\n  }\n}\nfunction proxyFields(wrapper) {\n  var reservedProxiedKeys = ['path', 'pathString', 'props'];\n\n  for (var _i = 0, _reservedProxiedKeys = reservedProxiedKeys; _i < _reservedProxiedKeys.length; _i++) {\n    var key = _reservedProxiedKeys[_i];\n    proxyFieldToLogic(wrapper, key);\n  }\n\n  for (var _i2 = 0, _Object$keys = Object.keys(getContext().plugins.logicFields); _i2 < _Object$keys.length; _i2++) {\n    var _key = _Object$keys[_i2];\n    proxyFieldToLogic(wrapper, _key);\n  }\n}\nfunction unmountedActionError(key, path) {\n  return \"[KEA] Can not access \\\"\" + key + \"\\\" on logic \\\"\" + path + \"\\\" because it is not mounted!\\nThis can happen in several situations:\\n- You may need to add the \\\"connect(otherLogic)\\\" logic builder, or \\\"useMountedLogic(otherLogic)\\\" hook to make sure the logic is mounted.\\n- If \\\"otherLogic\\\" is undefined, your bundler may import and execute code in an unfavourable order. Switch to a function: \\\"connect(() => otherLogic)\\\" \\n- It may be that the logic has already unmounted. Do you have a listener that is missing a breakpoint?\";\n}\n\nfunction getOrCreateContextForLogicWrapper(logic) {\n  var context = getContext().react.contexts.get(logic);\n\n  if (!context) {\n    context = /*#__PURE__*/React.createContext(undefined);\n    getContext().react.contexts.set(logic, context);\n  }\n\n  return context;\n}\nfunction BindLogic(_ref) {\n  var logic = _ref.logic,\n      props = _ref.props,\n      children = _ref.children;\n  var LogicContext = getOrCreateContextForLogicWrapper(logic);\n  var builtLogic = logic(props);\n  useMountedLogic(builtLogic);\n  return /*#__PURE__*/React.createElement(LogicContext.Provider, {\n    value: builtLogic\n  }, children);\n}\n\nvar warned = process.env.NODE_ENV === 'test' || process.env.NODE_ENV === 'production';\nfunction Provider(_ref) {\n  var children = _ref.children;\n\n  if (!warned) {\n    console.warn(\"[KEA] <Provider> is now a no-op and should be removed. If you need it for Redux, use react-redux's <Provider store={getContext().store} />, or use Kea's useSelector.\");\n    warned = true;\n  }\n\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, children);\n}\n\nvar ATTACH_REDUCER = ATTACH_REDUCER$1;\nvar DETACH_REDUCER = DETACH_REDUCER$1;\nresetContext({}, true);\n\nexport { ATTACH_REDUCER, BindLogic, DETACH_REDUCER, Provider, actions, activatePlugin, addConnection, afterMount, batchChanges, beforeUnmount, closeContext, connect, corePlugin, createActionCreator, createStore, defaults, events, getContext, getPluginContext, isBreakpoint, isBuiltLogic, isLogicWrapper, kea, keaReducer, key, listeners, openContext, path, props, propsChanged, reducers, resetContext, selectors, setPluginContext, shallowCompare, sharedListeners, useActions, useAllValues, useMountedLogic, useSelector, useValues };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}